{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DanielGarc\\xEDaCarabelo\\\\Downloads\\\\pag web boda 2.0\\\\html\\\\webreact\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\n\n// Minijuego 2D: El novio/la novia quiere llegar a la iglesia esquivando obstáculos\n// Controles: Space o Flecha ↑ para saltar. Mantén Flecha ↓ para agacharte (en el aire: caída rápida). R para reiniciar.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Game() {\n  _s();\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // Estados de juego: menu | intro | playing | win | gameover\n  const [status, setStatus] = useState('menu');\n  const [skin, setSkin] = useState('novio'); // 'novio' | 'novia'\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(300); // 5 minutos\n\n  const GAME_DURATION = 300; // 5 min gameplay (la intro no consume tiempo)\n\n  // NUEVO: refs para evitar valores congelados en el canvas\n  const SCORE = useRef(0);\n  const TIMELEFT = useRef(GAME_DURATION);\n  // NUEVO: mostrar la intro solo una vez\n  const INTRO_SHOWN = useRef(false);\n\n  // Intro tipo \"Star Wars\"\n  const INTRO = useRef({\n    offset: 0,\n    speed: 40,\n    // px/s desplazamiento hacia arriba\n    lines: ['En una galaxia muy, muy cercana...', 'Dos estrellas destinadas a unirse brillan con fuerza.', 'El gran día ha llegado y todos esperan en la iglesia.', 'Ayuda a la pareja a llegar a tiempo sorteando obstáculos...', 'Controles: ↑ o ESPACIO para saltar, ↓ para agacharte o caer rápido.', '¡Que la fuerza del amor te acompañe!']\n  });\n\n  // Estado del mundo\n  const WORLD = useRef({\n    speed: 220,\n    maxSpeed: 380,\n    gravity: 1700,\n    jumpV: 620,\n    fastFallBoost: 2200,\n    groundY: 220,\n    player: {\n      x: 80,\n      y: 0,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    },\n    worldX: 0,\n    obstacles: [],\n    startTs: 0,\n    lastTs: 0,\n    spawnTimer: 0,\n    spawnInterval: 1.4\n  });\n\n  // Reset base (sin cambiar estado)\n  const resetWorld = () => {\n    setScore(0);\n    setTimeLeft(GAME_DURATION);\n    WORLD.current.worldX = 0;\n    WORLD.current.lastTs = 0;\n    WORLD.current.startTs = 0;\n    WORLD.current.speed = 220;\n    WORLD.current.spawnInterval = 1.4;\n    WORLD.current.spawnTimer = 0.8;\n    WORLD.current.obstacles = [];\n    WORLD.current.player = {\n      x: 80,\n      y: WORLD.current.groundY - 42,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    };\n    // NUEVO: sincronizar refs\n    SCORE.current = 0;\n    TIMELEFT.current = GAME_DURATION;\n  };\n  useEffect(() => {\n    // init: mostrar menú\n    resetWorld();\n    INTRO.current.offset = 320; // arranca fuera de la pantalla por abajo\n  }, []);\n\n  // Bucle de juego y render\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    let rafId;\n    const loop = ts => {\n      if (!WORLD.current.lastTs) {\n        WORLD.current.lastTs = ts;\n        if (!WORLD.current.startTs && status === 'playing') WORLD.current.startTs = ts;\n      }\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\n      WORLD.current.lastTs = ts;\n      update(dt, ts);\n      render(ctx, canvas);\n      rafId = requestAnimationFrame(loop);\n    };\n    rafId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(rafId);\n  }, [status]);\n\n  // NUEVO: cada vez que entramos en intro, reiniciar offset para que se vea siempre\n  useEffect(() => {\n    if (status === 'intro') {\n      INTRO.current.offset = 320;\n    }\n  }, [status]);\n\n  // Entradas\n  useEffect(() => {\n    const onKeyDown = e => {\n      if (e.repeat) return;\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\n      if (e.code === 'ArrowDown') {\n        if (status === 'playing') crouch(true);\n      }\n      if (e.code === 'KeyR') {\n        if (status === 'playing' || status === 'gameover' || status === 'win') {\n          resetWorld();\n          setStatus('menu');\n        }\n      }\n    };\n    const onKeyUp = e => {\n      if (e.code === 'ArrowDown') crouch(false);\n    };\n    const onClick = () => {\n      if (status === 'playing') jump();\n    };\n    window.addEventListener('keydown', onKeyDown);\n    window.addEventListener('keyup', onKeyUp);\n    window.addEventListener('touchstart', onClick, {\n      passive: true\n    });\n    window.addEventListener('mousedown', onClick);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n      window.removeEventListener('keyup', onKeyUp);\n      window.removeEventListener('touchstart', onClick);\n      window.removeEventListener('mousedown', onClick);\n    };\n  }, [status]);\n  const jump = () => {\n    const p = WORLD.current.player;\n    if (p.onGround) {\n      p.vy = -WORLD.current.jumpV;\n      p.onGround = false;\n    }\n  };\n  const crouch = on => {\n    const p = WORLD.current.player;\n    if (on) {\n      if (!p.onGround) {\n        p.vy += WORLD.current.fastFallBoost * 0.04; // caída rápida\n      } else if (!p.crouching) {\n        p.crouching = true;\n        const prevBottom = p.y + p.h;\n        p.h = 26;\n        p.y = prevBottom - p.h;\n      }\n    } else {\n      if (p.crouching) {\n        const prevBottom = p.y + p.h;\n        p.h = 42;\n        p.y = prevBottom - p.h;\n        p.crouching = false;\n      }\n    }\n  };\n\n  // Acciones de UI\n  const handlePlayFullscreen = async () => {\n    try {\n      var _containerRef$current;\n      if ((_containerRef$current = containerRef.current) !== null && _containerRef$current !== void 0 && _containerRef$current.requestFullscreen) {\n        await containerRef.current.requestFullscreen();\n      }\n    } catch (e) {\n      // Ignorar fallos de fullscreen\n    }\n    // Limpiar mundo antes de jugar\n    resetWorld();\n    if (!INTRO_SHOWN.current) {\n      INTRO.current.offset = 320; // preparar intro\n      setStatus('intro');\n      INTRO_SHOWN.current = true; // marcar intro mostrada\n    } else {\n      // saltar intro en siguientes partidas\n      startPlaying();\n    }\n  };\n  const startPlaying = () => {\n    // Reset de marcas de tiempo para que el cronómetro cuente desde ahora\n    WORLD.current.lastTs = 0;\n    WORLD.current.startTs = 0;\n    setStatus('playing');\n  };\n\n  // NUEVO: reintentar sin repetir la intro\n  const handleRetry = () => {\n    resetWorld();\n    startPlaying();\n  };\n  const update = (dt, ts) => {\n    if (status === 'menu') return; // nada\n\n    if (status === 'intro') {\n      INTRO.current.offset -= INTRO.current.speed * dt;\n      // tras ~7-8s o cuando el texto sale por arriba, comenzamos\n      if (INTRO.current.offset < -120) startPlaying();\n      return;\n    }\n    if (status !== 'playing') return;\n\n    // Tiempo de juego\n    if (WORLD.current.startTs === 0) WORLD.current.startTs = ts;\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\n    // setTimeLeft(remaining);\n    TIMELEFT.current = remaining; // usar ref para el HUD del canvas\n    if (remaining <= 0.01) {\n      setStatus('win');\n      return;\n    }\n    const w = WORLD.current;\n    const p = w.player;\n\n    // Aceleración progresiva (cada vez más rápido)\n    const tFactor = Math.min(1, elapsed / GAME_DURATION);\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\n    w.spawnInterval = 1.4 - 0.8 * tFactor;\n\n    // Avance del \"mundo\"\n    w.worldX += w.speed * dt;\n\n    // Física del jugador\n    p.vy += w.gravity * dt;\n    p.y += p.vy * dt;\n\n    // Suelo\n    const groundY = w.groundY - p.h;\n    if (p.y >= groundY) {\n      p.y = groundY;\n      p.vy = 0;\n      p.onGround = true;\n    } else {\n      p.onGround = false;\n    }\n\n    // Spawning de obstáculos\n    w.spawnTimer -= dt;\n    if (w.spawnTimer <= 0) {\n      spawnObstacle(w);\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\n    }\n\n    // Colisiones + puntuación\n    for (const o of w.obstacles) {\n      const sx = o.x - w.worldX + p.x;\n      o.screenX = sx;\n      if (!o.scored && sx + o.w < p.x) {\n        o.scored = true;\n        // setScore((s) => s + 100);\n        SCORE.current += 100;\n      }\n      const px1 = p.x,\n        px2 = p.x + p.w;\n      const py1 = p.y,\n        py2 = p.y + p.h;\n      const ox1 = sx,\n        ox2 = sx + o.w;\n      const oy1 = o.y,\n        oy2 = o.y + o.h;\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\n      if (collide) {\n        setStatus('gameover');\n        break;\n      }\n    }\n\n    // Limpiar obstáculos fuera de pantalla\n    w.obstacles = w.obstacles.filter(o => o.screenX > -120);\n\n    // Puntuación por distancia\n    // setScore((s) => s + Math.floor(w.speed * dt * 0.5));\n    SCORE.current += Math.floor(w.speed * dt * 0.5);\n  };\n  const render = (ctx, canvas) => {\n    const w = WORLD.current;\n    const p = w.player;\n\n    // FONDO base (cielo) o negro en intro\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    if (status === 'intro') {\n      ctx.fillStyle = '#000';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      drawIntro(ctx, canvas, INTRO.current.lines, INTRO.current.offset);\n      return;\n    }\n\n    // Fondo cielo\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    g.addColorStop(0, '#e8f0ff');\n    g.addColorStop(1, '#ffffff');\n    ctx.fillStyle = g;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Suelo\n    ctx.fillStyle = '#c7d2fe';\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\n\n    // Obstáculos\n    for (const o of w.obstacles) {\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\n    }\n\n    // Jugador\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching, skin);\n\n    // HUD\n    if (status === 'playing') {\n      ctx.fillStyle = '#334155';\n      ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n      ctx.fillText(`Puntos: ${Math.floor(SCORE.current)}`, 12, 18);\n      ctx.fillText(`Tiempo: ${formatTime(TIMELEFT.current)}`, 12, 36);\n    }\n    if (status === 'gameover') {\n      drawOverlay(ctx, canvas, '¡Ups! Te has tropezado', 'Pulsa R para volver al menú');\n    } else if (status === 'win') {\n      drawOverlay(ctx, canvas, `¡Llegaste a tiempo! 💒`, `Puntuación: ${Math.floor(SCORE.current)}. Pulsa R para volver al menú`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      maxWidth: 860,\n      margin: '0 auto',\n      padding: '1rem',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '.5rem'\n      },\n      children: \"Camino a la iglesia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), status === 'menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        inset: 0,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: 'linear-gradient(135deg, rgba(255,255,255,.95), rgba(238,242,255,.95))',\n        zIndex: 5,\n        borderRadius: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 'min(92%, 560px)',\n          padding: '1.25rem',\n          borderRadius: 12,\n          boxShadow: '0 8px 28px rgba(0,0,0,.18)',\n          background: 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0,\n            textAlign: 'center'\n          },\n          children: \"Elige tu personaje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            justifyContent: 'center',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSkin('novio'),\n            className: skin === 'novio' ? 'active' : '',\n            style: skinBtnStyle(skin === 'novio'),\n            children: \"\\uD83E\\uDD35 Novio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSkin('novia'),\n            className: skin === 'novia' ? 'active' : '',\n            style: skinBtnStyle(skin === 'novia'),\n            children: \"\\uD83D\\uDC70 Novia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            color: '#64748b',\n            marginTop: 0\n          },\n          children: \"Llega a la iglesia esquivando obst\\xE1culos en 5 minutos. El juego acelerar\\xE1 poco a poco.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePlayFullscreen,\n            style: {\n              background: 'linear-gradient(135deg, #6366f1, #8b5cf6)',\n              color: 'white',\n              border: 0,\n              padding: '.75rem 1.25rem',\n              borderRadius: 10,\n              fontWeight: 700,\n              cursor: 'pointer',\n              boxShadow: '0 6px 18px rgba(99,102,241,.35)'\n            },\n            children: \"\\u25B6 Jugar en pantalla completa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: 12,\n        overflow: 'hidden',\n        boxShadow: '0 6px 24px rgba(0,0,0,.12)',\n        background: 'white',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: 800,\n        height: 260,\n        style: {\n          width: '100%',\n          display: 'block',\n          background: status === 'intro' ? '#000' : 'linear-gradient(#eef2ff, #fff)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), (status === 'gameover' || status === 'win') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          inset: 0,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 7\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(17,24,39,.88)',\n            color: '#fff',\n            padding: '1rem 1.25rem',\n            borderRadius: 12,\n            boxShadow: '0 8px 28px rgba(0,0,0,.35)',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              fontSize: 18,\n              marginBottom: 8\n            },\n            children: status === 'win' ? '¡Llegaste a tiempo! 💒' : '¡Ups! Te has tropezado'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 14,\n              opacity: .9,\n              marginBottom: 12\n            },\n            children: [\"Puntuaci\\xF3n: \", Math.floor(SCORE.current)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRetry,\n            style: {\n              background: '#22c55e',\n              color: '#0b1a0f',\n              border: 0,\n              padding: '.5rem 1rem',\n              borderRadius: 10,\n              fontWeight: 700,\n              cursor: 'pointer'\n            },\n            children: \"\\u21BB Reintentar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"MuHF5ZrFNO6DwKy3ZxGN87I6h28=\");\n_c = Game;\nfunction skinBtnStyle(active) {\n  return {\n    background: active ? '#111827' : '#f3f4f6',\n    color: active ? 'white' : '#111827',\n    border: '1px solid ' + (active ? '#111827' : '#e5e7eb'),\n    padding: '.6rem 1rem',\n    borderRadius: 10,\n    cursor: 'pointer',\n    minWidth: 120,\n    fontWeight: 600\n  };\n}\nfunction spawnObstacle(w) {\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\n  const type = Math.random() < 0.55 ? 'low' : 'high';\n  if (type === 'low') {\n    const width = 26 + Math.random() * 16;\n    const height = 22 + Math.random() * 20;\n    const x = w.worldX + 900 + Math.random() * 80;\n    const y = w.groundY - height;\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  } else {\n    const width = 80 + Math.random() * 60;\n    const height = 18;\n    const x = w.worldX + 900 + Math.random() * 80;\n    // altura que obliga a agacharse (por encima de altura de pie)\n    const y = w.groundY - (42 + 12);\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  }\n}\nfunction formatTime(t) {\n  const s = Math.max(0, Math.floor(t));\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\n  const ss = String(s % 60).padStart(2, '0');\n  return `${mm}:${ss}`;\n}\nfunction drawObstacleLow(ctx, x, y, w, h) {\n  ctx.save();\n  ctx.fillStyle = '#94a3b8';\n  ctx.strokeStyle = '#475569';\n  ctx.lineWidth = 2;\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.stroke();\n  ctx.restore();\n}\nfunction drawObstacleHigh(ctx, x, y, w, h) {\n  ctx.save();\n  // postes laterales\n  ctx.fillStyle = '#9ca3af';\n  roundRect(ctx, x, y + h - 30, 4, 30, 2);\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2);\n  ctx.fill();\n  // barra (verde temática)\n  ctx.fillStyle = '#22c55e';\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.restore();\n}\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching, skin) {\n  ctx.save();\n  if (skin === 'novia') {\n    // vestido\n    ctx.fillStyle = '#f8fafc';\n    roundRect(ctx, x - 2, y + h * 0.35, w + 4, h * 0.65, 10);\n    ctx.fill();\n    // torso\n    ctx.fillStyle = '#e5e7eb';\n    roundRect(ctx, x, y, w, h * 0.45, 8);\n    ctx.fill();\n    // cabeza\n    ctx.fillStyle = '#fde68a';\n    ctx.beginPath();\n    const headY = crouching ? y - 6 : y - 8;\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\n    ctx.fill();\n    // velo\n    ctx.globalAlpha = 0.6;\n    ctx.fillStyle = '#e0f2fe';\n    roundRect(ctx, x - 6, y - 6, w + 12, 16, 8);\n    ctx.fill();\n    ctx.globalAlpha = 1;\n  } else {\n    // traje\n    ctx.fillStyle = '#1f2937';\n    roundRect(ctx, x, y, w, h, 8);\n    ctx.fill();\n    // cabeza\n    ctx.fillStyle = '#fde68a';\n    ctx.beginPath();\n    const headY = crouching ? y - 6 : y - 8;\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\n    ctx.fill();\n    // corbata\n    ctx.fillStyle = '#ef4444';\n    ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\n  }\n  // sombra al saltar\n  if (jumping) {\n    ctx.globalAlpha = 0.2;\n    ctx.fillStyle = '#000';\n    ctx.beginPath();\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.globalAlpha = 1;\n  }\n  ctx.restore();\n}\nfunction drawIntro(ctx, canvas, lines, offset) {\n  ctx.save();\n  ctx.fillStyle = '#10b981'; // verde\n  ctx.textAlign = 'center';\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  const centerX = canvas.width / 2;\n  let y = canvas.height + offset;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    const scale = 1 - i * 0.05; // ligera perspectiva\n    ctx.save();\n    ctx.translate(centerX, y);\n    ctx.scale(scale, scale);\n    ctx.fillText(line, 0, 0);\n    ctx.restore();\n    y += 36;\n  }\n  ctx.restore();\n}\nfunction drawOverlay(ctx, canvas, title, subtitle) {\n  ctx.save();\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = '#fff';\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.textAlign = 'center';\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\n  ctx.restore();\n}\nfunction roundRect(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n}\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","Game","_s","containerRef","canvasRef","status","setStatus","skin","setSkin","score","setScore","timeLeft","setTimeLeft","GAME_DURATION","SCORE","TIMELEFT","INTRO_SHOWN","INTRO","offset","speed","lines","WORLD","maxSpeed","gravity","jumpV","fastFallBoost","groundY","player","x","y","w","h","vy","onGround","crouching","worldX","obstacles","startTs","lastTs","spawnTimer","spawnInterval","resetWorld","current","canvas","ctx","getContext","rafId","loop","ts","dt","Math","min","update","render","requestAnimationFrame","cancelAnimationFrame","onKeyDown","e","repeat","code","jump","crouch","onKeyUp","onClick","window","addEventListener","passive","removeEventListener","p","on","prevBottom","handlePlayFullscreen","_containerRef$current","requestFullscreen","startPlaying","handleRetry","elapsed","remaining","max","tFactor","spawnObstacle","random","o","sx","screenX","scored","px1","px2","py1","py2","ox1","ox2","oy1","oy2","collide","filter","floor","clearRect","width","height","fillStyle","fillRect","drawIntro","g","createLinearGradient","addColorStop","type","drawObstacleLow","drawObstacleHigh","drawGroom","font","fillText","formatTime","drawOverlay","ref","style","maxWidth","margin","padding","position","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","inset","display","alignItems","justifyContent","background","zIndex","borderRadius","boxShadow","marginTop","gap","className","skinBtnStyle","color","border","fontWeight","cursor","overflow","fontSize","opacity","_c","active","minWidth","push","t","s","mm","String","padStart","ss","save","strokeStyle","lineWidth","roundRect","fill","stroke","restore","jumping","beginPath","headY","arc","PI","globalAlpha","ellipse","centerX","i","length","line","scale","translate","title","subtitle","r","moveTo","arcTo","closePath","$RefreshReg$"],"sources":["C:/Users/DanielGarcíaCarabelo/Downloads/pag web boda 2.0/html/webreact/src/components/Game.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\n// Minijuego 2D: El novio/la novia quiere llegar a la iglesia esquivando obstáculos\r\n// Controles: Space o Flecha ↑ para saltar. Mantén Flecha ↓ para agacharte (en el aire: caída rápida). R para reiniciar.\r\nexport default function Game() {\r\n  const containerRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // Estados de juego: menu | intro | playing | win | gameover\r\n  const [status, setStatus] = useState('menu');\r\n  const [skin, setSkin] = useState('novio'); // 'novio' | 'novia'\r\n  const [score, setScore] = useState(0);\r\n  const [timeLeft, setTimeLeft] = useState(300); // 5 minutos\r\n\r\n  const GAME_DURATION = 300; // 5 min gameplay (la intro no consume tiempo)\r\n\r\n  // NUEVO: refs para evitar valores congelados en el canvas\r\n  const SCORE = useRef(0);\r\n  const TIMELEFT = useRef(GAME_DURATION);\r\n  // NUEVO: mostrar la intro solo una vez\r\n  const INTRO_SHOWN = useRef(false);\r\n\r\n  // Intro tipo \"Star Wars\"\r\n  const INTRO = useRef({\r\n    offset: 0,\r\n    speed: 40, // px/s desplazamiento hacia arriba\r\n    lines: [\r\n      'En una galaxia muy, muy cercana...',\r\n      'Dos estrellas destinadas a unirse brillan con fuerza.',\r\n      'El gran día ha llegado y todos esperan en la iglesia.',\r\n      'Ayuda a la pareja a llegar a tiempo sorteando obstáculos...',\r\n      'Controles: ↑ o ESPACIO para saltar, ↓ para agacharte o caer rápido.',\r\n      '¡Que la fuerza del amor te acompañe!'\r\n    ],\r\n  });\r\n\r\n  // Estado del mundo\r\n  const WORLD = useRef({\r\n    speed: 220,\r\n    maxSpeed: 380,\r\n    gravity: 1700,\r\n    jumpV: 620,\r\n    fastFallBoost: 2200,\r\n    groundY: 220,\r\n    player: { x: 80, y: 0, w: 32, h: 42, vy: 0, onGround: true, crouching: false },\r\n    worldX: 0,\r\n    obstacles: [],\r\n    startTs: 0,\r\n    lastTs: 0,\r\n    spawnTimer: 0,\r\n    spawnInterval: 1.4,\r\n  });\r\n\r\n  // Reset base (sin cambiar estado)\r\n  const resetWorld = () => {\r\n    setScore(0);\r\n    setTimeLeft(GAME_DURATION);\r\n    WORLD.current.worldX = 0;\r\n    WORLD.current.lastTs = 0;\r\n    WORLD.current.startTs = 0;\r\n    WORLD.current.speed = 220;\r\n    WORLD.current.spawnInterval = 1.4;\r\n    WORLD.current.spawnTimer = 0.8;\r\n    WORLD.current.obstacles = [];\r\n    WORLD.current.player = { x: 80, y: WORLD.current.groundY - 42, w: 32, h: 42, vy: 0, onGround: true, crouching: false };\r\n    // NUEVO: sincronizar refs\r\n    SCORE.current = 0;\r\n    TIMELEFT.current = GAME_DURATION;\r\n  };\r\n\r\n  useEffect(() => {\r\n    // init: mostrar menú\r\n    resetWorld();\r\n    INTRO.current.offset = 320; // arranca fuera de la pantalla por abajo\r\n  }, []);\r\n\r\n  // Bucle de juego y render\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    let rafId;\r\n    const loop = (ts) => {\r\n      if (!WORLD.current.lastTs) {\r\n        WORLD.current.lastTs = ts;\r\n        if (!WORLD.current.startTs && status === 'playing') WORLD.current.startTs = ts;\r\n      }\r\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\r\n      WORLD.current.lastTs = ts;\r\n\r\n      update(dt, ts);\r\n      render(ctx, canvas);\r\n      rafId = requestAnimationFrame(loop);\r\n    };\r\n\r\n    rafId = requestAnimationFrame(loop);\r\n    return () => cancelAnimationFrame(rafId);\r\n  }, [status]);\r\n\r\n  // NUEVO: cada vez que entramos en intro, reiniciar offset para que se vea siempre\r\n  useEffect(() => {\r\n    if (status === 'intro') {\r\n      INTRO.current.offset = 320;\r\n    }\r\n  }, [status]);\r\n\r\n  // Entradas\r\n  useEffect(() => {\r\n    const onKeyDown = (e) => {\r\n      if (e.repeat) return;\r\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\r\n      if (e.code === 'ArrowDown') {\r\n        if (status === 'playing') crouch(true);\r\n      }\r\n      if (e.code === 'KeyR') {\r\n        if (status === 'playing' || status === 'gameover' || status === 'win') {\r\n          resetWorld();\r\n          setStatus('menu');\r\n        }\r\n      }\r\n    };\r\n    const onKeyUp = (e) => {\r\n      if (e.code === 'ArrowDown') crouch(false);\r\n    };\r\n    const onClick = () => { if (status === 'playing') jump(); };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    window.addEventListener('keyup', onKeyUp);\r\n    window.addEventListener('touchstart', onClick, { passive: true });\r\n    window.addEventListener('mousedown', onClick);\r\n    return () => {\r\n      window.removeEventListener('keydown', onKeyDown);\r\n      window.removeEventListener('keyup', onKeyUp);\r\n      window.removeEventListener('touchstart', onClick);\r\n      window.removeEventListener('mousedown', onClick);\r\n    };\r\n  }, [status]);\r\n\r\n  const jump = () => {\r\n    const p = WORLD.current.player;\r\n    if (p.onGround) {\r\n      p.vy = -WORLD.current.jumpV;\r\n      p.onGround = false;\r\n    }\r\n  };\r\n\r\n  const crouch = (on) => {\r\n    const p = WORLD.current.player;\r\n    if (on) {\r\n      if (!p.onGround) {\r\n        p.vy += WORLD.current.fastFallBoost * 0.04; // caída rápida\r\n      } else if (!p.crouching) {\r\n        p.crouching = true;\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 26;\r\n        p.y = prevBottom - p.h;\r\n      }\r\n    } else {\r\n      if (p.crouching) {\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 42;\r\n        p.y = prevBottom - p.h;\r\n        p.crouching = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  // Acciones de UI\r\n  const handlePlayFullscreen = async () => {\r\n    try {\r\n      if (containerRef.current?.requestFullscreen) {\r\n        await containerRef.current.requestFullscreen();\r\n      }\r\n    } catch (e) {\r\n      // Ignorar fallos de fullscreen\r\n    }\r\n    // Limpiar mundo antes de jugar\r\n    resetWorld();\r\n    if (!INTRO_SHOWN.current) {\r\n      INTRO.current.offset = 320; // preparar intro\r\n      setStatus('intro');\r\n      INTRO_SHOWN.current = true; // marcar intro mostrada\r\n    } else {\r\n      // saltar intro en siguientes partidas\r\n      startPlaying();\r\n    }\r\n  };\r\n\r\n  const startPlaying = () => {\r\n    // Reset de marcas de tiempo para que el cronómetro cuente desde ahora\r\n    WORLD.current.lastTs = 0;\r\n    WORLD.current.startTs = 0;\r\n    setStatus('playing');\r\n  };\r\n\r\n  // NUEVO: reintentar sin repetir la intro\r\n  const handleRetry = () => {\r\n    resetWorld();\r\n    startPlaying();\r\n  };\r\n\r\n  const update = (dt, ts) => {\r\n    if (status === 'menu') return; // nada\r\n\r\n    if (status === 'intro') {\r\n      INTRO.current.offset -= INTRO.current.speed * dt;\r\n      // tras ~7-8s o cuando el texto sale por arriba, comenzamos\r\n      if (INTRO.current.offset < -120) startPlaying();\r\n      return;\r\n    }\r\n\r\n    if (status !== 'playing') return;\r\n\r\n    // Tiempo de juego\r\n    if (WORLD.current.startTs === 0) WORLD.current.startTs = ts;\r\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\r\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\r\n    // setTimeLeft(remaining);\r\n    TIMELEFT.current = remaining; // usar ref para el HUD del canvas\r\n    if (remaining <= 0.01) {\r\n      setStatus('win');\r\n      return;\r\n    }\r\n\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // Aceleración progresiva (cada vez más rápido)\r\n    const tFactor = Math.min(1, elapsed / GAME_DURATION);\r\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\r\n    w.spawnInterval = 1.4 - 0.8 * tFactor;\r\n\r\n    // Avance del \"mundo\"\r\n    w.worldX += w.speed * dt;\r\n\r\n    // Física del jugador\r\n    p.vy += w.gravity * dt;\r\n    p.y += p.vy * dt;\r\n\r\n    // Suelo\r\n    const groundY = w.groundY - p.h;\r\n    if (p.y >= groundY) {\r\n      p.y = groundY;\r\n      p.vy = 0;\r\n      p.onGround = true;\r\n    } else {\r\n      p.onGround = false;\r\n    }\r\n\r\n    // Spawning de obstáculos\r\n    w.spawnTimer -= dt;\r\n    if (w.spawnTimer <= 0) {\r\n      spawnObstacle(w);\r\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\r\n    }\r\n\r\n    // Colisiones + puntuación\r\n    for (const o of w.obstacles) {\r\n      const sx = o.x - w.worldX + p.x;\r\n      o.screenX = sx;\r\n\r\n      if (!o.scored && sx + o.w < p.x) {\r\n        o.scored = true;\r\n        // setScore((s) => s + 100);\r\n        SCORE.current += 100;\r\n      }\r\n\r\n      const px1 = p.x, px2 = p.x + p.w;\r\n      const py1 = p.y, py2 = p.y + p.h;\r\n      const ox1 = sx, ox2 = sx + o.w;\r\n      const oy1 = o.y, oy2 = o.y + o.h;\r\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\r\n      if (collide) {\r\n        setStatus('gameover');\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Limpiar obstáculos fuera de pantalla\r\n    w.obstacles = w.obstacles.filter((o) => o.screenX > -120);\r\n\r\n    // Puntuación por distancia\r\n    // setScore((s) => s + Math.floor(w.speed * dt * 0.5));\r\n    SCORE.current += Math.floor(w.speed * dt * 0.5);\r\n  };\r\n\r\n  const render = (ctx, canvas) => {\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // FONDO base (cielo) o negro en intro\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    if (status === 'intro') {\r\n      ctx.fillStyle = '#000';\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      drawIntro(ctx, canvas, INTRO.current.lines, INTRO.current.offset);\r\n      return;\r\n    }\r\n\r\n    // Fondo cielo\r\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n    g.addColorStop(0, '#e8f0ff');\r\n    g.addColorStop(1, '#ffffff');\r\n    ctx.fillStyle = g;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Suelo\r\n    ctx.fillStyle = '#c7d2fe';\r\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\r\n\r\n    // Obstáculos\r\n    for (const o of w.obstacles) {\r\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\r\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);\r\n      else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\r\n    }\r\n\r\n    // Jugador\r\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching, skin);\r\n\r\n    // HUD\r\n    if (status === 'playing') {\r\n      ctx.fillStyle = '#334155';\r\n      ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n      ctx.fillText(`Puntos: ${Math.floor(SCORE.current)}`, 12, 18);\r\n      ctx.fillText(`Tiempo: ${formatTime(TIMELEFT.current)}`, 12, 36);\r\n    }\r\n\r\n    if (status === 'gameover') {\r\n      drawOverlay(ctx, canvas, '¡Ups! Te has tropezado', 'Pulsa R para volver al menú');\r\n    } else if (status === 'win') {\r\n      drawOverlay(ctx, canvas, `¡Llegaste a tiempo! 💒`, `Puntuación: ${Math.floor(SCORE.current)}. Pulsa R para volver al menú`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ maxWidth: 860, margin: '0 auto', padding: '1rem', position: 'relative' }}>\r\n      <h2 style={{ textAlign: 'center', marginBottom: '.5rem' }}>Camino a la iglesia</h2>\r\n      {/* Panel de control/menú */}\r\n      {status === 'menu' && (\r\n        <div style={{\r\n          position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n          background: 'linear-gradient(135deg, rgba(255,255,255,.95), rgba(238,242,255,.95))',\r\n          zIndex: 5, borderRadius: 12\r\n        }}>\r\n          <div style={{ width: 'min(92%, 560px)', padding: '1.25rem', borderRadius: 12, boxShadow: '0 8px 28px rgba(0,0,0,.18)', background: 'white' }}>\r\n            <h3 style={{ marginTop: 0, textAlign: 'center' }}>Elige tu personaje</h3>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', marginBottom: '1rem' }}>\r\n              <button\r\n                onClick={() => setSkin('novio')}\r\n                className={skin === 'novio' ? 'active' : ''}\r\n                style={skinBtnStyle(skin === 'novio')}\r\n              >\r\n                🤵 Novio\r\n              </button>\r\n              <button\r\n                onClick={() => setSkin('novia')}\r\n                className={skin === 'novia' ? 'active' : ''}\r\n                style={skinBtnStyle(skin === 'novia')}\r\n              >\r\n                👰 Novia\r\n              </button>\r\n            </div>\r\n            <p style={{ textAlign: 'center', color: '#64748b', marginTop: 0 }}>\r\n              Llega a la iglesia esquivando obstáculos en 5 minutos. El juego acelerará poco a poco.\r\n            </p>\r\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n              <button onClick={handlePlayFullscreen} style={{\r\n                background: 'linear-gradient(135deg, #6366f1, #8b5cf6)', color: 'white', border: 0, padding: '.75rem 1.25rem',\r\n                borderRadius: 10, fontWeight: 700, cursor: 'pointer', boxShadow: '0 6px 18px rgba(99,102,241,.35)'\r\n              }}>▶ Jugar en pantalla completa</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ borderRadius: 12, overflow: 'hidden', boxShadow: '0 6px 24px rgba(0,0,0,.12)', background: 'white', position: 'relative' }}>\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={800}\r\n          height={260}\r\n          style={{ width: '100%', display: 'block', background: status === 'intro' ? '#000' : 'linear-gradient(#eef2ff, #fff)' }}\r\n        />\r\n        {/* NUEVO: overlay con botón Reintentar al terminar */}\r\n        {(status === 'gameover' || status === 'win') && (\r\n          <div style={{ position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 7 }}>\r\n            <div style={{ background: 'rgba(17,24,39,.88)', color: '#fff', padding: '1rem 1.25rem', borderRadius: 12, boxShadow: '0 8px 28px rgba(0,0,0,.35)', textAlign: 'center' }}>\r\n              <div style={{ fontWeight: 700, fontSize: 18, marginBottom: 8 }}>\r\n                {status === 'win' ? '¡Llegaste a tiempo! 💒' : '¡Ups! Te has tropezado'}\r\n              </div>\r\n              <div style={{ fontSize: 14, opacity: .9, marginBottom: 12 }}>\r\n                Puntuación: {Math.floor(SCORE.current)}\r\n              </div>\r\n              <button onClick={handleRetry} style={{ background: '#22c55e', color: '#0b1a0f', border: 0, padding: '.5rem 1rem', borderRadius: 10, fontWeight: 700, cursor: 'pointer' }}>↻ Reintentar</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction skinBtnStyle(active) {\r\n  return {\r\n    background: active ? '#111827' : '#f3f4f6',\r\n    color: active ? 'white' : '#111827',\r\n    border: '1px solid ' + (active ? '#111827' : '#e5e7eb'),\r\n    padding: '.6rem 1rem',\r\n    borderRadius: 10,\r\n    cursor: 'pointer',\r\n    minWidth: 120,\r\n    fontWeight: 600,\r\n  };\r\n}\r\n\r\nfunction spawnObstacle(w) {\r\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\r\n  const type = Math.random() < 0.55 ? 'low' : 'high';\r\n  if (type === 'low') {\r\n    const width = 26 + Math.random() * 16;\r\n    const height = 22 + Math.random() * 20;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    const y = w.groundY - height;\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  } else {\r\n    const width = 80 + Math.random() * 60;\r\n    const height = 18;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    // altura que obliga a agacharse (por encima de altura de pie)\r\n    const y = w.groundY - (42 + 12);\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  }\r\n}\r\n\r\nfunction formatTime(t) {\r\n  const s = Math.max(0, Math.floor(t));\r\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\r\n  const ss = String(s % 60).padStart(2, '0');\r\n  return `${mm}:${ss}`;\r\n}\r\n\r\nfunction drawObstacleLow(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  ctx.fillStyle = '#94a3b8';\r\n  ctx.strokeStyle = '#475569';\r\n  ctx.lineWidth = 2;\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawObstacleHigh(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  // postes laterales\r\n  ctx.fillStyle = '#9ca3af';\r\n  roundRect(ctx, x, y + h - 30, 4, 30, 2);\r\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2);\r\n  ctx.fill();\r\n  // barra (verde temática)\r\n  ctx.fillStyle = '#22c55e';\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching, skin) {\r\n  ctx.save();\r\n  if (skin === 'novia') {\r\n    // vestido\r\n    ctx.fillStyle = '#f8fafc';\r\n    roundRect(ctx, x - 2, y + h * 0.35, w + 4, h * 0.65, 10);\r\n    ctx.fill();\r\n    // torso\r\n    ctx.fillStyle = '#e5e7eb';\r\n    roundRect(ctx, x, y, w, h * 0.45, 8);\r\n    ctx.fill();\r\n    // cabeza\r\n    ctx.fillStyle = '#fde68a';\r\n    ctx.beginPath();\r\n    const headY = crouching ? y - 6 : y - 8;\r\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // velo\r\n    ctx.globalAlpha = 0.6;\r\n    ctx.fillStyle = '#e0f2fe';\r\n    roundRect(ctx, x - 6, y - 6, w + 12, 16, 8);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  } else {\r\n    // traje\r\n    ctx.fillStyle = '#1f2937';\r\n    roundRect(ctx, x, y, w, h, 8);\r\n    ctx.fill();\r\n    // cabeza\r\n    ctx.fillStyle = '#fde68a';\r\n    ctx.beginPath();\r\n    const headY = crouching ? y - 6 : y - 8;\r\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // corbata\r\n    ctx.fillStyle = '#ef4444';\r\n    ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\r\n  }\r\n  // sombra al saltar\r\n  if (jumping) {\r\n    ctx.globalAlpha = 0.2;\r\n    ctx.fillStyle = '#000';\r\n    ctx.beginPath();\r\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawIntro(ctx, canvas, lines, offset) {\r\n  ctx.save();\r\n  ctx.fillStyle = '#10b981'; // verde\r\n  ctx.textAlign = 'center';\r\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  const centerX = canvas.width / 2;\r\n  let y = canvas.height + offset;\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i];\r\n    const scale = 1 - i * 0.05; // ligera perspectiva\r\n    ctx.save();\r\n    ctx.translate(centerX, y);\r\n    ctx.scale(scale, scale);\r\n    ctx.fillText(line, 0, 0);\r\n    ctx.restore();\r\n    y += 36;\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawOverlay(ctx, canvas, title, subtitle) {\r\n  ctx.save();\r\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  ctx.fillStyle = '#fff';\r\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.textAlign = 'center';\r\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\r\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\r\n  ctx.restore();\r\n}\r\n\r\nfunction roundRect(ctx, x, y, w, h, r) {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x + r, y);\r\n  ctx.arcTo(x + w, y, x + w, y + h, r);\r\n  ctx.arcTo(x + w, y + h, x, y + h, r);\r\n  ctx.arcTo(x, y + h, x, y, r);\r\n  ctx.arcTo(x, y, x + w, y, r);\r\n  ctx.closePath();\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;;AAE1D;AACA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,eAAe,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EAC7B,MAAMC,YAAY,GAAGN,MAAM,CAAC,IAAI,CAAC;EACjC,MAAMO,SAAS,GAAGP,MAAM,CAAC,IAAI,CAAC;;EAE9B;EACA,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,MAAM,CAAC;EAC5C,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;;EAE/C,MAAMe,aAAa,GAAG,GAAG,CAAC,CAAC;;EAE3B;EACA,MAAMC,KAAK,GAAGjB,MAAM,CAAC,CAAC,CAAC;EACvB,MAAMkB,QAAQ,GAAGlB,MAAM,CAACgB,aAAa,CAAC;EACtC;EACA,MAAMG,WAAW,GAAGnB,MAAM,CAAC,KAAK,CAAC;;EAEjC;EACA,MAAMoB,KAAK,GAAGpB,MAAM,CAAC;IACnBqB,MAAM,EAAE,CAAC;IACTC,KAAK,EAAE,EAAE;IAAE;IACXC,KAAK,EAAE,CACL,oCAAoC,EACpC,uDAAuD,EACvD,uDAAuD,EACvD,6DAA6D,EAC7D,qEAAqE,EACrE,sCAAsC;EAE1C,CAAC,CAAC;;EAEF;EACA,MAAMC,KAAK,GAAGxB,MAAM,CAAC;IACnBsB,KAAK,EAAE,GAAG;IACVG,QAAQ,EAAE,GAAG;IACbC,OAAO,EAAE,IAAI;IACbC,KAAK,EAAE,GAAG;IACVC,aAAa,EAAE,IAAI;IACnBC,OAAO,EAAE,GAAG;IACZC,MAAM,EAAE;MAAEC,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE,EAAE;MAAEC,EAAE,EAAE,CAAC;MAAEC,QAAQ,EAAE,IAAI;MAAEC,SAAS,EAAE;IAAM,CAAC;IAC9EC,MAAM,EAAE,CAAC;IACTC,SAAS,EAAE,EAAE;IACbC,OAAO,EAAE,CAAC;IACVC,MAAM,EAAE,CAAC;IACTC,UAAU,EAAE,CAAC;IACbC,aAAa,EAAE;EACjB,CAAC,CAAC;;EAEF;EACA,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvB/B,QAAQ,CAAC,CAAC,CAAC;IACXE,WAAW,CAACC,aAAa,CAAC;IAC1BQ,KAAK,CAACqB,OAAO,CAACP,MAAM,GAAG,CAAC;IACxBd,KAAK,CAACqB,OAAO,CAACJ,MAAM,GAAG,CAAC;IACxBjB,KAAK,CAACqB,OAAO,CAACL,OAAO,GAAG,CAAC;IACzBhB,KAAK,CAACqB,OAAO,CAACvB,KAAK,GAAG,GAAG;IACzBE,KAAK,CAACqB,OAAO,CAACF,aAAa,GAAG,GAAG;IACjCnB,KAAK,CAACqB,OAAO,CAACH,UAAU,GAAG,GAAG;IAC9BlB,KAAK,CAACqB,OAAO,CAACN,SAAS,GAAG,EAAE;IAC5Bf,KAAK,CAACqB,OAAO,CAACf,MAAM,GAAG;MAAEC,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAER,KAAK,CAACqB,OAAO,CAAChB,OAAO,GAAG,EAAE;MAAEI,CAAC,EAAE,EAAE;MAAEC,CAAC,EAAE,EAAE;MAAEC,EAAE,EAAE,CAAC;MAAEC,QAAQ,EAAE,IAAI;MAAEC,SAAS,EAAE;IAAM,CAAC;IACtH;IACApB,KAAK,CAAC4B,OAAO,GAAG,CAAC;IACjB3B,QAAQ,CAAC2B,OAAO,GAAG7B,aAAa;EAClC,CAAC;EAEDjB,SAAS,CAAC,MAAM;IACd;IACA6C,UAAU,CAAC,CAAC;IACZxB,KAAK,CAACyB,OAAO,CAACxB,MAAM,GAAG,GAAG,CAAC,CAAC;EAC9B,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAtB,SAAS,CAAC,MAAM;IACd,MAAM+C,MAAM,GAAGvC,SAAS,CAACsC,OAAO;IAChC,IAAI,CAACC,MAAM,EAAE;IACb,MAAMC,GAAG,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;IAEnC,IAAIC,KAAK;IACT,MAAMC,IAAI,GAAIC,EAAE,IAAK;MACnB,IAAI,CAAC3B,KAAK,CAACqB,OAAO,CAACJ,MAAM,EAAE;QACzBjB,KAAK,CAACqB,OAAO,CAACJ,MAAM,GAAGU,EAAE;QACzB,IAAI,CAAC3B,KAAK,CAACqB,OAAO,CAACL,OAAO,IAAIhC,MAAM,KAAK,SAAS,EAAEgB,KAAK,CAACqB,OAAO,CAACL,OAAO,GAAGW,EAAE;MAChF;MACA,MAAMC,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,KAAK,EAAE,CAACH,EAAE,GAAG3B,KAAK,CAACqB,OAAO,CAACJ,MAAM,IAAI,IAAI,CAAC;MAC9DjB,KAAK,CAACqB,OAAO,CAACJ,MAAM,GAAGU,EAAE;MAEzBI,MAAM,CAACH,EAAE,EAAED,EAAE,CAAC;MACdK,MAAM,CAACT,GAAG,EAAED,MAAM,CAAC;MACnBG,KAAK,GAAGQ,qBAAqB,CAACP,IAAI,CAAC;IACrC,CAAC;IAEDD,KAAK,GAAGQ,qBAAqB,CAACP,IAAI,CAAC;IACnC,OAAO,MAAMQ,oBAAoB,CAACT,KAAK,CAAC;EAC1C,CAAC,EAAE,CAACzC,MAAM,CAAC,CAAC;;EAEZ;EACAT,SAAS,CAAC,MAAM;IACd,IAAIS,MAAM,KAAK,OAAO,EAAE;MACtBY,KAAK,CAACyB,OAAO,CAACxB,MAAM,GAAG,GAAG;IAC5B;EACF,CAAC,EAAE,CAACb,MAAM,CAAC,CAAC;;EAEZ;EACAT,SAAS,CAAC,MAAM;IACd,MAAM4D,SAAS,GAAIC,CAAC,IAAK;MACvB,IAAIA,CAAC,CAACC,MAAM,EAAE;MACd,IAAI,CAACD,CAAC,CAACE,IAAI,KAAK,OAAO,IAAIF,CAAC,CAACE,IAAI,KAAK,SAAS,KAAKtD,MAAM,KAAK,SAAS,EAAEuD,IAAI,CAAC,CAAC;MAChF,IAAIH,CAAC,CAACE,IAAI,KAAK,WAAW,EAAE;QAC1B,IAAItD,MAAM,KAAK,SAAS,EAAEwD,MAAM,CAAC,IAAI,CAAC;MACxC;MACA,IAAIJ,CAAC,CAACE,IAAI,KAAK,MAAM,EAAE;QACrB,IAAItD,MAAM,KAAK,SAAS,IAAIA,MAAM,KAAK,UAAU,IAAIA,MAAM,KAAK,KAAK,EAAE;UACrEoC,UAAU,CAAC,CAAC;UACZnC,SAAS,CAAC,MAAM,CAAC;QACnB;MACF;IACF,CAAC;IACD,MAAMwD,OAAO,GAAIL,CAAC,IAAK;MACrB,IAAIA,CAAC,CAACE,IAAI,KAAK,WAAW,EAAEE,MAAM,CAAC,KAAK,CAAC;IAC3C,CAAC;IACD,MAAME,OAAO,GAAGA,CAAA,KAAM;MAAE,IAAI1D,MAAM,KAAK,SAAS,EAAEuD,IAAI,CAAC,CAAC;IAAE,CAAC;IAE3DI,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAET,SAAS,CAAC;IAC7CQ,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEH,OAAO,CAAC;IACzCE,MAAM,CAACC,gBAAgB,CAAC,YAAY,EAAEF,OAAO,EAAE;MAAEG,OAAO,EAAE;IAAK,CAAC,CAAC;IACjEF,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEF,OAAO,CAAC;IAC7C,OAAO,MAAM;MACXC,MAAM,CAACG,mBAAmB,CAAC,SAAS,EAAEX,SAAS,CAAC;MAChDQ,MAAM,CAACG,mBAAmB,CAAC,OAAO,EAAEL,OAAO,CAAC;MAC5CE,MAAM,CAACG,mBAAmB,CAAC,YAAY,EAAEJ,OAAO,CAAC;MACjDC,MAAM,CAACG,mBAAmB,CAAC,WAAW,EAAEJ,OAAO,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAAC1D,MAAM,CAAC,CAAC;EAEZ,MAAMuD,IAAI,GAAGA,CAAA,KAAM;IACjB,MAAMQ,CAAC,GAAG/C,KAAK,CAACqB,OAAO,CAACf,MAAM;IAC9B,IAAIyC,CAAC,CAACnC,QAAQ,EAAE;MACdmC,CAAC,CAACpC,EAAE,GAAG,CAACX,KAAK,CAACqB,OAAO,CAAClB,KAAK;MAC3B4C,CAAC,CAACnC,QAAQ,GAAG,KAAK;IACpB;EACF,CAAC;EAED,MAAM4B,MAAM,GAAIQ,EAAE,IAAK;IACrB,MAAMD,CAAC,GAAG/C,KAAK,CAACqB,OAAO,CAACf,MAAM;IAC9B,IAAI0C,EAAE,EAAE;MACN,IAAI,CAACD,CAAC,CAACnC,QAAQ,EAAE;QACfmC,CAAC,CAACpC,EAAE,IAAIX,KAAK,CAACqB,OAAO,CAACjB,aAAa,GAAG,IAAI,CAAC,CAAC;MAC9C,CAAC,MAAM,IAAI,CAAC2C,CAAC,CAAClC,SAAS,EAAE;QACvBkC,CAAC,CAAClC,SAAS,GAAG,IAAI;QAClB,MAAMoC,UAAU,GAAGF,CAAC,CAACvC,CAAC,GAAGuC,CAAC,CAACrC,CAAC;QAC5BqC,CAAC,CAACrC,CAAC,GAAG,EAAE;QACRqC,CAAC,CAACvC,CAAC,GAAGyC,UAAU,GAAGF,CAAC,CAACrC,CAAC;MACxB;IACF,CAAC,MAAM;MACL,IAAIqC,CAAC,CAAClC,SAAS,EAAE;QACf,MAAMoC,UAAU,GAAGF,CAAC,CAACvC,CAAC,GAAGuC,CAAC,CAACrC,CAAC;QAC5BqC,CAAC,CAACrC,CAAC,GAAG,EAAE;QACRqC,CAAC,CAACvC,CAAC,GAAGyC,UAAU,GAAGF,CAAC,CAACrC,CAAC;QACtBqC,CAAC,CAAClC,SAAS,GAAG,KAAK;MACrB;IACF;EACF,CAAC;;EAED;EACA,MAAMqC,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI;MAAA,IAAAC,qBAAA;MACF,KAAAA,qBAAA,GAAIrE,YAAY,CAACuC,OAAO,cAAA8B,qBAAA,eAApBA,qBAAA,CAAsBC,iBAAiB,EAAE;QAC3C,MAAMtE,YAAY,CAACuC,OAAO,CAAC+B,iBAAiB,CAAC,CAAC;MAChD;IACF,CAAC,CAAC,OAAOhB,CAAC,EAAE;MACV;IAAA;IAEF;IACAhB,UAAU,CAAC,CAAC;IACZ,IAAI,CAACzB,WAAW,CAAC0B,OAAO,EAAE;MACxBzB,KAAK,CAACyB,OAAO,CAACxB,MAAM,GAAG,GAAG,CAAC,CAAC;MAC5BZ,SAAS,CAAC,OAAO,CAAC;MAClBU,WAAW,CAAC0B,OAAO,GAAG,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL;MACAgC,YAAY,CAAC,CAAC;IAChB;EACF,CAAC;EAED,MAAMA,YAAY,GAAGA,CAAA,KAAM;IACzB;IACArD,KAAK,CAACqB,OAAO,CAACJ,MAAM,GAAG,CAAC;IACxBjB,KAAK,CAACqB,OAAO,CAACL,OAAO,GAAG,CAAC;IACzB/B,SAAS,CAAC,SAAS,CAAC;EACtB,CAAC;;EAED;EACA,MAAMqE,WAAW,GAAGA,CAAA,KAAM;IACxBlC,UAAU,CAAC,CAAC;IACZiC,YAAY,CAAC,CAAC;EAChB,CAAC;EAED,MAAMtB,MAAM,GAAGA,CAACH,EAAE,EAAED,EAAE,KAAK;IACzB,IAAI3C,MAAM,KAAK,MAAM,EAAE,OAAO,CAAC;;IAE/B,IAAIA,MAAM,KAAK,OAAO,EAAE;MACtBY,KAAK,CAACyB,OAAO,CAACxB,MAAM,IAAID,KAAK,CAACyB,OAAO,CAACvB,KAAK,GAAG8B,EAAE;MAChD;MACA,IAAIhC,KAAK,CAACyB,OAAO,CAACxB,MAAM,GAAG,CAAC,GAAG,EAAEwD,YAAY,CAAC,CAAC;MAC/C;IACF;IAEA,IAAIrE,MAAM,KAAK,SAAS,EAAE;;IAE1B;IACA,IAAIgB,KAAK,CAACqB,OAAO,CAACL,OAAO,KAAK,CAAC,EAAEhB,KAAK,CAACqB,OAAO,CAACL,OAAO,GAAGW,EAAE;IAC3D,MAAM4B,OAAO,GAAG,CAAC5B,EAAE,GAAG3B,KAAK,CAACqB,OAAO,CAACL,OAAO,IAAI,IAAI;IACnD,MAAMwC,SAAS,GAAG3B,IAAI,CAAC4B,GAAG,CAAC,CAAC,EAAEjE,aAAa,GAAG+D,OAAO,CAAC;IACtD;IACA7D,QAAQ,CAAC2B,OAAO,GAAGmC,SAAS,CAAC,CAAC;IAC9B,IAAIA,SAAS,IAAI,IAAI,EAAE;MACrBvE,SAAS,CAAC,KAAK,CAAC;MAChB;IACF;IAEA,MAAMwB,CAAC,GAAGT,KAAK,CAACqB,OAAO;IACvB,MAAM0B,CAAC,GAAGtC,CAAC,CAACH,MAAM;;IAElB;IACA,MAAMoD,OAAO,GAAG7B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEyB,OAAO,GAAG/D,aAAa,CAAC;IACpDiB,CAAC,CAACX,KAAK,GAAG,GAAG,GAAG,CAACW,CAAC,CAACR,QAAQ,GAAG,GAAG,IAAIyD,OAAO;IAC5CjD,CAAC,CAACU,aAAa,GAAG,GAAG,GAAG,GAAG,GAAGuC,OAAO;;IAErC;IACAjD,CAAC,CAACK,MAAM,IAAIL,CAAC,CAACX,KAAK,GAAG8B,EAAE;;IAExB;IACAmB,CAAC,CAACpC,EAAE,IAAIF,CAAC,CAACP,OAAO,GAAG0B,EAAE;IACtBmB,CAAC,CAACvC,CAAC,IAAIuC,CAAC,CAACpC,EAAE,GAAGiB,EAAE;;IAEhB;IACA,MAAMvB,OAAO,GAAGI,CAAC,CAACJ,OAAO,GAAG0C,CAAC,CAACrC,CAAC;IAC/B,IAAIqC,CAAC,CAACvC,CAAC,IAAIH,OAAO,EAAE;MAClB0C,CAAC,CAACvC,CAAC,GAAGH,OAAO;MACb0C,CAAC,CAACpC,EAAE,GAAG,CAAC;MACRoC,CAAC,CAACnC,QAAQ,GAAG,IAAI;IACnB,CAAC,MAAM;MACLmC,CAAC,CAACnC,QAAQ,GAAG,KAAK;IACpB;;IAEA;IACAH,CAAC,CAACS,UAAU,IAAIU,EAAE;IAClB,IAAInB,CAAC,CAACS,UAAU,IAAI,CAAC,EAAE;MACrByC,aAAa,CAAClD,CAAC,CAAC;MAChBA,CAAC,CAACS,UAAU,GAAGT,CAAC,CAACU,aAAa,IAAI,GAAG,GAAGU,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC;IAC9D;;IAEA;IACA,KAAK,MAAMC,CAAC,IAAIpD,CAAC,CAACM,SAAS,EAAE;MAC3B,MAAM+C,EAAE,GAAGD,CAAC,CAACtD,CAAC,GAAGE,CAAC,CAACK,MAAM,GAAGiC,CAAC,CAACxC,CAAC;MAC/BsD,CAAC,CAACE,OAAO,GAAGD,EAAE;MAEd,IAAI,CAACD,CAAC,CAACG,MAAM,IAAIF,EAAE,GAAGD,CAAC,CAACpD,CAAC,GAAGsC,CAAC,CAACxC,CAAC,EAAE;QAC/BsD,CAAC,CAACG,MAAM,GAAG,IAAI;QACf;QACAvE,KAAK,CAAC4B,OAAO,IAAI,GAAG;MACtB;MAEA,MAAM4C,GAAG,GAAGlB,CAAC,CAACxC,CAAC;QAAE2D,GAAG,GAAGnB,CAAC,CAACxC,CAAC,GAAGwC,CAAC,CAACtC,CAAC;MAChC,MAAM0D,GAAG,GAAGpB,CAAC,CAACvC,CAAC;QAAE4D,GAAG,GAAGrB,CAAC,CAACvC,CAAC,GAAGuC,CAAC,CAACrC,CAAC;MAChC,MAAM2D,GAAG,GAAGP,EAAE;QAAEQ,GAAG,GAAGR,EAAE,GAAGD,CAAC,CAACpD,CAAC;MAC9B,MAAM8D,GAAG,GAAGV,CAAC,CAACrD,CAAC;QAAEgE,GAAG,GAAGX,CAAC,CAACrD,CAAC,GAAGqD,CAAC,CAACnD,CAAC;MAChC,MAAM+D,OAAO,GAAGR,GAAG,GAAGK,GAAG,IAAIJ,GAAG,GAAGG,GAAG,IAAIF,GAAG,GAAGK,GAAG,IAAIJ,GAAG,GAAGG,GAAG;MAChE,IAAIE,OAAO,EAAE;QACXxF,SAAS,CAAC,UAAU,CAAC;QACrB;MACF;IACF;;IAEA;IACAwB,CAAC,CAACM,SAAS,GAAGN,CAAC,CAACM,SAAS,CAAC2D,MAAM,CAAEb,CAAC,IAAKA,CAAC,CAACE,OAAO,GAAG,CAAC,GAAG,CAAC;;IAEzD;IACA;IACAtE,KAAK,CAAC4B,OAAO,IAAIQ,IAAI,CAAC8C,KAAK,CAAClE,CAAC,CAACX,KAAK,GAAG8B,EAAE,GAAG,GAAG,CAAC;EACjD,CAAC;EAED,MAAMI,MAAM,GAAGA,CAACT,GAAG,EAAED,MAAM,KAAK;IAC9B,MAAMb,CAAC,GAAGT,KAAK,CAACqB,OAAO;IACvB,MAAM0B,CAAC,GAAGtC,CAAC,CAACH,MAAM;;IAElB;IACAiB,GAAG,CAACqD,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEtD,MAAM,CAACuD,KAAK,EAAEvD,MAAM,CAACwD,MAAM,CAAC;IAChD,IAAI9F,MAAM,KAAK,OAAO,EAAE;MACtBuC,GAAG,CAACwD,SAAS,GAAG,MAAM;MACtBxD,GAAG,CAACyD,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE1D,MAAM,CAACuD,KAAK,EAAEvD,MAAM,CAACwD,MAAM,CAAC;MAC/CG,SAAS,CAAC1D,GAAG,EAAED,MAAM,EAAE1B,KAAK,CAACyB,OAAO,CAACtB,KAAK,EAAEH,KAAK,CAACyB,OAAO,CAACxB,MAAM,CAAC;MACjE;IACF;;IAEA;IACA,MAAMqF,CAAC,GAAG3D,GAAG,CAAC4D,oBAAoB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE7D,MAAM,CAACwD,MAAM,CAAC;IAC1DI,CAAC,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;IAC5BF,CAAC,CAACE,YAAY,CAAC,CAAC,EAAE,SAAS,CAAC;IAC5B7D,GAAG,CAACwD,SAAS,GAAGG,CAAC;IACjB3D,GAAG,CAACyD,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE1D,MAAM,CAACuD,KAAK,EAAEvD,MAAM,CAACwD,MAAM,CAAC;;IAE/C;IACAvD,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzBxD,GAAG,CAACyD,QAAQ,CAAC,CAAC,EAAEvE,CAAC,CAACJ,OAAO,GAAG,EAAE,EAAEiB,MAAM,CAACuD,KAAK,EAAE,CAAC,CAAC;;IAEhD;IACA,KAAK,MAAMhB,CAAC,IAAIpD,CAAC,CAACM,SAAS,EAAE;MAC3B,IAAI8C,CAAC,CAACE,OAAO,GAAG,CAAC,EAAE,IAAIF,CAAC,CAACE,OAAO,GAAGzC,MAAM,CAACuD,KAAK,GAAG,GAAG,EAAE;MACvD,IAAIhB,CAAC,CAACwB,IAAI,KAAK,KAAK,EAAEC,eAAe,CAAC/D,GAAG,EAAEsC,CAAC,CAACE,OAAO,EAAEF,CAAC,CAACrD,CAAC,EAAEqD,CAAC,CAACpD,CAAC,EAAEoD,CAAC,CAACnD,CAAC,CAAC,CAAC,KAChE6E,gBAAgB,CAAChE,GAAG,EAAEsC,CAAC,CAACE,OAAO,EAAEF,CAAC,CAACrD,CAAC,EAAEqD,CAAC,CAACpD,CAAC,EAAEoD,CAAC,CAACnD,CAAC,CAAC;IACtD;;IAEA;IACA8E,SAAS,CAACjE,GAAG,EAAEwB,CAAC,CAACxC,CAAC,EAAEwC,CAAC,CAACvC,CAAC,EAAEuC,CAAC,CAACtC,CAAC,EAAEsC,CAAC,CAACrC,CAAC,EAAE,CAACqC,CAAC,CAACnC,QAAQ,EAAEmC,CAAC,CAAClC,SAAS,EAAE3B,IAAI,CAAC;;IAElE;IACA,IAAIF,MAAM,KAAK,SAAS,EAAE;MACxBuC,GAAG,CAACwD,SAAS,GAAG,SAAS;MACzBxD,GAAG,CAACkE,IAAI,GAAG,wDAAwD;MACnElE,GAAG,CAACmE,QAAQ,CAAC,WAAW7D,IAAI,CAAC8C,KAAK,CAAClF,KAAK,CAAC4B,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;MAC5DE,GAAG,CAACmE,QAAQ,CAAC,WAAWC,UAAU,CAACjG,QAAQ,CAAC2B,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IACjE;IAEA,IAAIrC,MAAM,KAAK,UAAU,EAAE;MACzB4G,WAAW,CAACrE,GAAG,EAAED,MAAM,EAAE,wBAAwB,EAAE,6BAA6B,CAAC;IACnF,CAAC,MAAM,IAAItC,MAAM,KAAK,KAAK,EAAE;MAC3B4G,WAAW,CAACrE,GAAG,EAAED,MAAM,EAAE,wBAAwB,EAAE,eAAeO,IAAI,CAAC8C,KAAK,CAAClF,KAAK,CAAC4B,OAAO,CAAC,+BAA+B,CAAC;IAC7H;EACF,CAAC;EAED,oBACE1C,OAAA;IAAKkH,GAAG,EAAE/G,YAAa;IAACgH,KAAK,EAAE;MAAEC,QAAQ,EAAE,GAAG;MAAEC,MAAM,EAAE,QAAQ;MAAEC,OAAO,EAAE,MAAM;MAAEC,QAAQ,EAAE;IAAW,CAAE;IAAAC,QAAA,gBACxGxH,OAAA;MAAImH,KAAK,EAAE;QAAEM,SAAS,EAAE,QAAQ;QAAEC,YAAY,EAAE;MAAQ,CAAE;MAAAF,QAAA,EAAC;IAAmB;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAElFzH,MAAM,KAAK,MAAM,iBAChBL,OAAA;MAAKmH,KAAK,EAAE;QACVI,QAAQ,EAAE,UAAU;QAAEQ,KAAK,EAAE,CAAC;QAAEC,OAAO,EAAE,MAAM;QAAEC,UAAU,EAAE,QAAQ;QAAEC,cAAc,EAAE,QAAQ;QAC/FC,UAAU,EAAE,uEAAuE;QACnFC,MAAM,EAAE,CAAC;QAAEC,YAAY,EAAE;MAC3B,CAAE;MAAAb,QAAA,eACAxH,OAAA;QAAKmH,KAAK,EAAE;UAAEjB,KAAK,EAAE,iBAAiB;UAAEoB,OAAO,EAAE,SAAS;UAAEe,YAAY,EAAE,EAAE;UAAEC,SAAS,EAAE,4BAA4B;UAAEH,UAAU,EAAE;QAAQ,CAAE;QAAAX,QAAA,gBAC3IxH,OAAA;UAAImH,KAAK,EAAE;YAAEoB,SAAS,EAAE,CAAC;YAAEd,SAAS,EAAE;UAAS,CAAE;UAAAD,QAAA,EAAC;QAAkB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzE9H,OAAA;UAAKmH,KAAK,EAAE;YAAEa,OAAO,EAAE,MAAM;YAAEQ,GAAG,EAAE,MAAM;YAAEN,cAAc,EAAE,QAAQ;YAAER,YAAY,EAAE;UAAO,CAAE;UAAAF,QAAA,gBAC3FxH,OAAA;YACE+D,OAAO,EAAEA,CAAA,KAAMvD,OAAO,CAAC,OAAO,CAAE;YAChCiI,SAAS,EAAElI,IAAI,KAAK,OAAO,GAAG,QAAQ,GAAG,EAAG;YAC5C4G,KAAK,EAAEuB,YAAY,CAACnI,IAAI,KAAK,OAAO,CAAE;YAAAiH,QAAA,EACvC;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT9H,OAAA;YACE+D,OAAO,EAAEA,CAAA,KAAMvD,OAAO,CAAC,OAAO,CAAE;YAChCiI,SAAS,EAAElI,IAAI,KAAK,OAAO,GAAG,QAAQ,GAAG,EAAG;YAC5C4G,KAAK,EAAEuB,YAAY,CAACnI,IAAI,KAAK,OAAO,CAAE;YAAAiH,QAAA,EACvC;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACN9H,OAAA;UAAGmH,KAAK,EAAE;YAAEM,SAAS,EAAE,QAAQ;YAAEkB,KAAK,EAAE,SAAS;YAAEJ,SAAS,EAAE;UAAE,CAAE;UAAAf,QAAA,EAAC;QAEnE;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACJ9H,OAAA;UAAKmH,KAAK,EAAE;YAAEa,OAAO,EAAE,MAAM;YAAEE,cAAc,EAAE;UAAS,CAAE;UAAAV,QAAA,eACxDxH,OAAA;YAAQ+D,OAAO,EAAEQ,oBAAqB;YAAC4C,KAAK,EAAE;cAC5CgB,UAAU,EAAE,2CAA2C;cAAEQ,KAAK,EAAE,OAAO;cAAEC,MAAM,EAAE,CAAC;cAAEtB,OAAO,EAAE,gBAAgB;cAC7Ge,YAAY,EAAE,EAAE;cAAEQ,UAAU,EAAE,GAAG;cAAEC,MAAM,EAAE,SAAS;cAAER,SAAS,EAAE;YACnE,CAAE;YAAAd,QAAA,EAAC;UAA4B;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAED9H,OAAA;MAAKmH,KAAK,EAAE;QAAEkB,YAAY,EAAE,EAAE;QAAEU,QAAQ,EAAE,QAAQ;QAAET,SAAS,EAAE,4BAA4B;QAAEH,UAAU,EAAE,OAAO;QAAEZ,QAAQ,EAAE;MAAW,CAAE;MAAAC,QAAA,gBACvIxH,OAAA;QACEkH,GAAG,EAAE9G,SAAU;QACf8F,KAAK,EAAE,GAAI;QACXC,MAAM,EAAE,GAAI;QACZgB,KAAK,EAAE;UAAEjB,KAAK,EAAE,MAAM;UAAE8B,OAAO,EAAE,OAAO;UAAEG,UAAU,EAAE9H,MAAM,KAAK,OAAO,GAAG,MAAM,GAAG;QAAiC;MAAE;QAAAsH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxH,CAAC,EAED,CAACzH,MAAM,KAAK,UAAU,IAAIA,MAAM,KAAK,KAAK,kBACzCL,OAAA;QAAKmH,KAAK,EAAE;UAAEI,QAAQ,EAAE,UAAU;UAAEQ,KAAK,EAAE,CAAC;UAAEC,OAAO,EAAE,MAAM;UAAEC,UAAU,EAAE,QAAQ;UAAEC,cAAc,EAAE,QAAQ;UAAEE,MAAM,EAAE;QAAE,CAAE;QAAAZ,QAAA,eACzHxH,OAAA;UAAKmH,KAAK,EAAE;YAAEgB,UAAU,EAAE,oBAAoB;YAAEQ,KAAK,EAAE,MAAM;YAAErB,OAAO,EAAE,cAAc;YAAEe,YAAY,EAAE,EAAE;YAAEC,SAAS,EAAE,4BAA4B;YAAEb,SAAS,EAAE;UAAS,CAAE;UAAAD,QAAA,gBACvKxH,OAAA;YAAKmH,KAAK,EAAE;cAAE0B,UAAU,EAAE,GAAG;cAAEG,QAAQ,EAAE,EAAE;cAAEtB,YAAY,EAAE;YAAE,CAAE;YAAAF,QAAA,EAC5DnH,MAAM,KAAK,KAAK,GAAG,wBAAwB,GAAG;UAAwB;YAAAsH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpE,CAAC,eACN9H,OAAA;YAAKmH,KAAK,EAAE;cAAE6B,QAAQ,EAAE,EAAE;cAAEC,OAAO,EAAE,EAAE;cAAEvB,YAAY,EAAE;YAAG,CAAE;YAAAF,QAAA,GAAC,iBAC/C,EAACtE,IAAI,CAAC8C,KAAK,CAAClF,KAAK,CAAC4B,OAAO,CAAC;UAAA;YAAAiF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC,eACN9H,OAAA;YAAQ+D,OAAO,EAAEY,WAAY;YAACwC,KAAK,EAAE;cAAEgB,UAAU,EAAE,SAAS;cAAEQ,KAAK,EAAE,SAAS;cAAEC,MAAM,EAAE,CAAC;cAAEtB,OAAO,EAAE,YAAY;cAAEe,YAAY,EAAE,EAAE;cAAEQ,UAAU,EAAE,GAAG;cAAEC,MAAM,EAAE;YAAU,CAAE;YAAAtB,QAAA,EAAC;UAAY;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5L;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC5H,EAAA,CA7YuBD,IAAI;AAAAiJ,EAAA,GAAJjJ,IAAI;AA+Y5B,SAASyI,YAAYA,CAACS,MAAM,EAAE;EAC5B,OAAO;IACLhB,UAAU,EAAEgB,MAAM,GAAG,SAAS,GAAG,SAAS;IAC1CR,KAAK,EAAEQ,MAAM,GAAG,OAAO,GAAG,SAAS;IACnCP,MAAM,EAAE,YAAY,IAAIO,MAAM,GAAG,SAAS,GAAG,SAAS,CAAC;IACvD7B,OAAO,EAAE,YAAY;IACrBe,YAAY,EAAE,EAAE;IAChBS,MAAM,EAAE,SAAS;IACjBM,QAAQ,EAAE,GAAG;IACbP,UAAU,EAAE;EACd,CAAC;AACH;AAEA,SAAS7D,aAAaA,CAAClD,CAAC,EAAE;EACxB;EACA,MAAM4E,IAAI,GAAGxD,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,IAAI,GAAG,KAAK,GAAG,MAAM;EAClD,IAAIyB,IAAI,KAAK,KAAK,EAAE;IAClB,MAAMR,KAAK,GAAG,EAAE,GAAGhD,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,EAAE;IACrC,MAAMkB,MAAM,GAAG,EAAE,GAAGjD,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,EAAE;IACtC,MAAMrD,CAAC,GAAGE,CAAC,CAACK,MAAM,GAAG,GAAG,GAAGe,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,EAAE;IAC7C,MAAMpD,CAAC,GAAGC,CAAC,CAACJ,OAAO,GAAGyE,MAAM;IAC5BrE,CAAC,CAACM,SAAS,CAACiH,IAAI,CAAC;MAAE3C,IAAI;MAAE9E,CAAC;MAAEC,CAAC;MAAEC,CAAC,EAAEoE,KAAK;MAAEnE,CAAC,EAAEoE,MAAM;MAAEd,MAAM,EAAE,KAAK;MAAED,OAAO,EAAE;IAAE,CAAC,CAAC;EAClF,CAAC,MAAM;IACL,MAAMc,KAAK,GAAG,EAAE,GAAGhD,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,EAAE;IACrC,MAAMkB,MAAM,GAAG,EAAE;IACjB,MAAMvE,CAAC,GAAGE,CAAC,CAACK,MAAM,GAAG,GAAG,GAAGe,IAAI,CAAC+B,MAAM,CAAC,CAAC,GAAG,EAAE;IAC7C;IACA,MAAMpD,CAAC,GAAGC,CAAC,CAACJ,OAAO,IAAI,EAAE,GAAG,EAAE,CAAC;IAC/BI,CAAC,CAACM,SAAS,CAACiH,IAAI,CAAC;MAAE3C,IAAI;MAAE9E,CAAC;MAAEC,CAAC;MAAEC,CAAC,EAAEoE,KAAK;MAAEnE,CAAC,EAAEoE,MAAM;MAAEd,MAAM,EAAE,KAAK;MAAED,OAAO,EAAE;IAAE,CAAC,CAAC;EAClF;AACF;AAEA,SAAS4B,UAAUA,CAACsC,CAAC,EAAE;EACrB,MAAMC,CAAC,GAAGrG,IAAI,CAAC4B,GAAG,CAAC,CAAC,EAAE5B,IAAI,CAAC8C,KAAK,CAACsD,CAAC,CAAC,CAAC;EACpC,MAAME,EAAE,GAAGC,MAAM,CAACvG,IAAI,CAAC8C,KAAK,CAACuD,CAAC,GAAG,EAAE,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACtD,MAAMC,EAAE,GAAGF,MAAM,CAACF,CAAC,GAAG,EAAE,CAAC,CAACG,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EAC1C,OAAO,GAAGF,EAAE,IAAIG,EAAE,EAAE;AACtB;AAEA,SAAShD,eAAeA,CAAC/D,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;EACxCa,GAAG,CAACgH,IAAI,CAAC,CAAC;EACVhH,GAAG,CAACwD,SAAS,GAAG,SAAS;EACzBxD,GAAG,CAACiH,WAAW,GAAG,SAAS;EAC3BjH,GAAG,CAACkH,SAAS,GAAG,CAAC;EACjBC,SAAS,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE,CAAC,CAAC;EAC7Ba,GAAG,CAACoH,IAAI,CAAC,CAAC;EACVpH,GAAG,CAACqH,MAAM,CAAC,CAAC;EACZrH,GAAG,CAACsH,OAAO,CAAC,CAAC;AACf;AAEA,SAAStD,gBAAgBA,CAAChE,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;EACzCa,GAAG,CAACgH,IAAI,CAAC,CAAC;EACV;EACAhH,GAAG,CAACwD,SAAS,GAAG,SAAS;EACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,GAAGE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;EACvCgI,SAAS,CAACnH,GAAG,EAAEhB,CAAC,GAAGE,CAAC,GAAG,CAAC,EAAED,CAAC,GAAGE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;EAC/Ca,GAAG,CAACoH,IAAI,CAAC,CAAC;EACV;EACApH,GAAG,CAACwD,SAAS,GAAG,SAAS;EACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE,CAAC,CAAC;EAC7Ba,GAAG,CAACoH,IAAI,CAAC,CAAC;EACVpH,GAAG,CAACsH,OAAO,CAAC,CAAC;AACf;AAEA,SAASrD,SAASA,CAACjE,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEoI,OAAO,EAAEjI,SAAS,EAAE3B,IAAI,EAAE;EAC5DqC,GAAG,CAACgH,IAAI,CAAC,CAAC;EACV,IAAIrJ,IAAI,KAAK,OAAO,EAAE;IACpB;IACAqC,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGE,CAAC,GAAG,IAAI,EAAED,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,EAAE,EAAE,CAAC;IACxDa,GAAG,CAACoH,IAAI,CAAC,CAAC;IACV;IACApH,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;IACpCa,GAAG,CAACoH,IAAI,CAAC,CAAC;IACV;IACApH,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzBxD,GAAG,CAACwH,SAAS,CAAC,CAAC;IACf,MAAMC,KAAK,GAAGnI,SAAS,GAAGL,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG,CAAC;IACvCe,GAAG,CAAC0H,GAAG,CAAC1I,CAAC,GAAGE,CAAC,GAAG,CAAC,EAAEuI,KAAK,EAAE,EAAE,EAAE,CAAC,EAAEnH,IAAI,CAACqH,EAAE,GAAG,CAAC,CAAC;IAC7C3H,GAAG,CAACoH,IAAI,CAAC,CAAC;IACV;IACApH,GAAG,CAAC4H,WAAW,GAAG,GAAG;IACrB5H,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAC3Cc,GAAG,CAACoH,IAAI,CAAC,CAAC;IACVpH,GAAG,CAAC4H,WAAW,GAAG,CAAC;EACrB,CAAC,MAAM;IACL;IACA5H,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzB2D,SAAS,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE,CAAC,CAAC;IAC7Ba,GAAG,CAACoH,IAAI,CAAC,CAAC;IACV;IACApH,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzBxD,GAAG,CAACwH,SAAS,CAAC,CAAC;IACf,MAAMC,KAAK,GAAGnI,SAAS,GAAGL,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG,CAAC;IACvCe,GAAG,CAAC0H,GAAG,CAAC1I,CAAC,GAAGE,CAAC,GAAG,CAAC,EAAEuI,KAAK,EAAE,EAAE,EAAE,CAAC,EAAEnH,IAAI,CAACqH,EAAE,GAAG,CAAC,CAAC;IAC7C3H,GAAG,CAACoH,IAAI,CAAC,CAAC;IACV;IACApH,GAAG,CAACwD,SAAS,GAAG,SAAS;IACzBxD,GAAG,CAACyD,QAAQ,CAACzE,CAAC,GAAGE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAED,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;EAC5C;EACA;EACA,IAAIsI,OAAO,EAAE;IACXvH,GAAG,CAAC4H,WAAW,GAAG,GAAG;IACrB5H,GAAG,CAACwD,SAAS,GAAG,MAAM;IACtBxD,GAAG,CAACwH,SAAS,CAAC,CAAC;IACfxH,GAAG,CAAC6H,OAAO,CAAC7I,CAAC,GAAGE,CAAC,GAAG,CAAC,EAAED,CAAC,GAAGE,CAAC,GAAG,EAAE,EAAED,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEoB,IAAI,CAACqH,EAAE,GAAG,CAAC,CAAC;IACjE3H,GAAG,CAACoH,IAAI,CAAC,CAAC;IACVpH,GAAG,CAAC4H,WAAW,GAAG,CAAC;EACrB;EACA5H,GAAG,CAACsH,OAAO,CAAC,CAAC;AACf;AAEA,SAAS5D,SAASA,CAAC1D,GAAG,EAAED,MAAM,EAAEvB,KAAK,EAAEF,MAAM,EAAE;EAC7C0B,GAAG,CAACgH,IAAI,CAAC,CAAC;EACVhH,GAAG,CAACwD,SAAS,GAAG,SAAS,CAAC,CAAC;EAC3BxD,GAAG,CAAC6E,SAAS,GAAG,QAAQ;EACxB7E,GAAG,CAACkE,IAAI,GAAG,6DAA6D;EACxE,MAAM4D,OAAO,GAAG/H,MAAM,CAACuD,KAAK,GAAG,CAAC;EAChC,IAAIrE,CAAC,GAAGc,MAAM,CAACwD,MAAM,GAAGjF,MAAM;EAC9B,KAAK,IAAIyJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGvJ,KAAK,CAACwJ,MAAM,EAAED,CAAC,EAAE,EAAE;IACrC,MAAME,IAAI,GAAGzJ,KAAK,CAACuJ,CAAC,CAAC;IACrB,MAAMG,KAAK,GAAG,CAAC,GAAGH,CAAC,GAAG,IAAI,CAAC,CAAC;IAC5B/H,GAAG,CAACgH,IAAI,CAAC,CAAC;IACVhH,GAAG,CAACmI,SAAS,CAACL,OAAO,EAAE7I,CAAC,CAAC;IACzBe,GAAG,CAACkI,KAAK,CAACA,KAAK,EAAEA,KAAK,CAAC;IACvBlI,GAAG,CAACmE,QAAQ,CAAC8D,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;IACxBjI,GAAG,CAACsH,OAAO,CAAC,CAAC;IACbrI,CAAC,IAAI,EAAE;EACT;EACAe,GAAG,CAACsH,OAAO,CAAC,CAAC;AACf;AAEA,SAASjD,WAAWA,CAACrE,GAAG,EAAED,MAAM,EAAEqI,KAAK,EAAEC,QAAQ,EAAE;EACjDrI,GAAG,CAACgH,IAAI,CAAC,CAAC;EACVhH,GAAG,CAACwD,SAAS,GAAG,kBAAkB;EAClCxD,GAAG,CAACyD,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE1D,MAAM,CAACuD,KAAK,EAAEvD,MAAM,CAACwD,MAAM,CAAC;EAC/CvD,GAAG,CAACwD,SAAS,GAAG,MAAM;EACtBxD,GAAG,CAACkE,IAAI,GAAG,6DAA6D;EACxElE,GAAG,CAAC6E,SAAS,GAAG,QAAQ;EACxB7E,GAAG,CAACmE,QAAQ,CAACiE,KAAK,EAAErI,MAAM,CAACuD,KAAK,GAAG,CAAC,EAAEvD,MAAM,CAACwD,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;EAC5DvD,GAAG,CAACkE,IAAI,GAAG,wDAAwD;EACnElE,GAAG,CAACmE,QAAQ,CAACkE,QAAQ,EAAEtI,MAAM,CAACuD,KAAK,GAAG,CAAC,EAAEvD,MAAM,CAACwD,MAAM,GAAG,CAAC,GAAG,EAAE,CAAC;EAChEvD,GAAG,CAACsH,OAAO,CAAC,CAAC;AACf;AAEA,SAASH,SAASA,CAACnH,GAAG,EAAEhB,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEmJ,CAAC,EAAE;EACrCtI,GAAG,CAACwH,SAAS,CAAC,CAAC;EACfxH,GAAG,CAACuI,MAAM,CAACvJ,CAAC,GAAGsJ,CAAC,EAAErJ,CAAC,CAAC;EACpBe,GAAG,CAACwI,KAAK,CAACxJ,CAAC,GAAGE,CAAC,EAAED,CAAC,EAAED,CAAC,GAAGE,CAAC,EAAED,CAAC,GAAGE,CAAC,EAAEmJ,CAAC,CAAC;EACpCtI,GAAG,CAACwI,KAAK,CAACxJ,CAAC,GAAGE,CAAC,EAAED,CAAC,GAAGE,CAAC,EAAEH,CAAC,EAAEC,CAAC,GAAGE,CAAC,EAAEmJ,CAAC,CAAC;EACpCtI,GAAG,CAACwI,KAAK,CAACxJ,CAAC,EAAEC,CAAC,GAAGE,CAAC,EAAEH,CAAC,EAAEC,CAAC,EAAEqJ,CAAC,CAAC;EAC5BtI,GAAG,CAACwI,KAAK,CAACxJ,CAAC,EAAEC,CAAC,EAAED,CAAC,GAAGE,CAAC,EAAED,CAAC,EAAEqJ,CAAC,CAAC;EAC5BtI,GAAG,CAACyI,SAAS,CAAC,CAAC;AACjB;AAAC,IAAAnC,EAAA;AAAAoC,YAAA,CAAApC,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}