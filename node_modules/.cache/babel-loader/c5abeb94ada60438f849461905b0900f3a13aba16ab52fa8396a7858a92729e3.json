{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DanielGarc\\xEDaCarabelo\\\\Downloads\\\\pag web boda 2.0\\\\html\\\\webreact\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\n\n// Minijuego 2D: El novio/la novia quiere llegar a la iglesia esquivando obstÃ¡culos\n// Controles: Space o Flecha â†‘ para saltar. MantÃ©n Flecha â†“ para agacharte (en el aire: caÃ­da rÃ¡pida). R para reiniciar.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Game() {\n  _s();\n  const containerRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // Estados de juego: menu | intro | playing | win | gameover\n  const [status, setStatus] = useState('menu');\n  const [skin, setSkin] = useState('novio'); // 'novio' | 'novia'\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(300); // 5 minutos\n\n  const GAME_DURATION = 300; // 5 min gameplay (la intro no consume tiempo)\n\n  // NUEVO: refs para evitar valores congelados en el canvas\n  const SCORE = useRef(0);\n  const TIMELEFT = useRef(GAME_DURATION);\n  // NUEVO: mostrar la intro solo una vez\n  const INTRO_SHOWN = useRef(false);\n\n  // NUEVO: Audio (mÃºsica de fondo generativa con WebAudio)\n  const AUDIO = useRef({\n    ctx: null,\n    gain: null,\n    playing: false,\n    muted: false,\n    lead: null,\n    bass: null,\n    timer: null,\n    step: 0\n  });\n  const [muted, setMuted] = useState(false);\n  const BASE_VOL = 0.02;\n\n  // Intro tipo \"Star Wars\"\n  const INTRO = useRef({\n    offset: 0,\n    speed: 60,\n    // px/s desplazamiento hacia arriba\n    lines: ['En una galaxia muy, muy cercana...', 'Dos estrellas destinadas a unirse brillan con fuerza.', 'El gran dÃ­a ha llegado y todos esperan en la iglesia.', 'Ayuda a la pareja a llegar a tiempo sorteando obstÃ¡culos...', 'Controles: â†‘ o ESPACIO para saltar, â†“ para agacharte o caer rÃ¡pido.', 'Â¡Que la fuerza del amor te acompaÃ±e!']\n  });\n\n  // Estado del mundo\n  const WORLD = useRef({\n    speed: 220,\n    maxSpeed: 380,\n    gravity: 1700,\n    jumpV: 620,\n    fastFallBoost: 2200,\n    groundY: 220,\n    player: {\n      x: 80,\n      y: 0,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    },\n    worldX: 0,\n    obstacles: [],\n    startTs: 0,\n    lastTs: 0,\n    spawnTimer: 0,\n    spawnInterval: 1.4\n  });\n\n  // Reset base (sin cambiar estado)\n  const resetWorld = () => {\n    setScore(0);\n    setTimeLeft(GAME_DURATION);\n    WORLD.current.worldX = 0;\n    WORLD.current.lastTs = 0;\n    WORLD.current.startTs = 0;\n    WORLD.current.speed = 220;\n    WORLD.current.spawnInterval = 1.4;\n    WORLD.current.spawnTimer = 0.8;\n    WORLD.current.obstacles = [];\n    WORLD.current.player = {\n      x: 80,\n      y: WORLD.current.groundY - 42,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    };\n    // NUEVO: sincronizar refs\n    SCORE.current = 0;\n    TIMELEFT.current = GAME_DURATION;\n  };\n  useEffect(() => {\n    // init: mostrar menÃº\n    resetWorld();\n    INTRO.current.offset = 320; // arranca fuera de la pantalla por abajo\n  }, []);\n\n  // Bucle de juego y render\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    let rafId;\n    const loop = ts => {\n      if (!WORLD.current.lastTs) {\n        WORLD.current.lastTs = ts;\n        if (!WORLD.current.startTs && status === 'playing') WORLD.current.startTs = ts;\n      }\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\n      WORLD.current.lastTs = ts;\n      update(dt, ts);\n      render(ctx, canvas);\n      rafId = requestAnimationFrame(loop);\n    };\n    rafId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(rafId);\n  }, [status]);\n\n  // NUEVO: cada vez que entramos en intro, reiniciar offset para que se vea siempre\n  useEffect(() => {\n    if (status === 'intro') {\n      INTRO.current.offset = 320;\n    }\n  }, [status]);\n\n  // Entradas\n  useEffect(() => {\n    const onKeyDown = e => {\n      if (e.repeat) return;\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\n      if (e.code === 'ArrowDown') {\n        if (status === 'playing') crouch(true);\n      }\n      if (e.code === 'KeyR') {\n        if (status === 'playing' || status === 'gameover' || status === 'win') {\n          resetWorld();\n          setStatus('menu');\n        }\n      }\n    };\n    const onKeyUp = e => {\n      if (e.code === 'ArrowDown') crouch(false);\n    };\n    const onClick = () => {\n      if (status === 'playing') jump();\n    };\n    window.addEventListener('keydown', onKeyDown);\n    window.addEventListener('keyup', onKeyUp);\n    window.addEventListener('touchstart', onClick, {\n      passive: true\n    });\n    window.addEventListener('mousedown', onClick);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n      window.removeEventListener('keyup', onKeyUp);\n      window.removeEventListener('touchstart', onClick);\n      window.removeEventListener('mousedown', onClick);\n    };\n  }, [status]);\n  const jump = () => {\n    const p = WORLD.current.player;\n    if (p.onGround) {\n      p.vy = -WORLD.current.jumpV;\n      p.onGround = false;\n    }\n  };\n  const crouch = on => {\n    const p = WORLD.current.player;\n    if (on) {\n      if (!p.onGround) {\n        p.vy += WORLD.current.fastFallBoost * 0.04; // caÃ­da rÃ¡pida\n      } else if (!p.crouching) {\n        p.crouching = true;\n        const prevBottom = p.y + p.h;\n        p.h = 26;\n        p.y = prevBottom - p.h;\n      }\n    } else {\n      if (p.crouching) {\n        const prevBottom = p.y + p.h;\n        p.h = 42;\n        p.y = prevBottom - p.h;\n        p.crouching = false;\n      }\n    }\n  };\n\n  // Acciones de UI\n  const handlePlayFullscreen = async () => {\n    try {\n      var _containerRef$current;\n      if ((_containerRef$current = containerRef.current) !== null && _containerRef$current !== void 0 && _containerRef$current.requestFullscreen) {\n        await containerRef.current.requestFullscreen();\n      }\n    } catch (e) {/* noop */}\n    // Limpiar mundo antes de jugar\n    resetWorld();\n\n    // Iniciar mÃºsica en la interacciÃ³n de usuario\n    startMusic();\n    if (!INTRO_SHOWN.current) {\n      INTRO.current.offset = 320; // preparar intro\n      setStatus('intro');\n      INTRO_SHOWN.current = true; // marcar intro mostrada\n    } else {\n      startPlaying();\n    }\n  };\n  const startPlaying = () => {\n    // Reset de marcas de tiempo para que el cronÃ³metro cuente desde ahora\n    WORLD.current.lastTs = 0;\n    WORLD.current.startTs = 0;\n    setStatus('playing');\n  };\n\n  // NUEVO: reintentar sin repetir la intro\n  const handleRetry = () => {\n    resetWorld();\n    startPlaying();\n  };\n  const update = (dt, ts) => {\n    if (status === 'menu') return; // nada\n\n    if (status === 'intro') {\n      INTRO.current.offset -= INTRO.current.speed * dt;\n      // tras ~7-8s o cuando el texto sale por arriba, comenzamos\n      if (INTRO.current.offset < -120) startPlaying();\n      return;\n    }\n    if (status !== 'playing') return;\n\n    // Tiempo de juego\n    if (WORLD.current.startTs === 0) WORLD.current.startTs = ts;\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\n    // setTimeLeft(remaining);\n    TIMELEFT.current = remaining; // usar ref para el HUD del canvas\n    if (remaining <= 0.01) {\n      setStatus('win');\n      return;\n    }\n    const w = WORLD.current;\n    const p = w.player;\n\n    // AceleraciÃ³n progresiva (cada vez mÃ¡s rÃ¡pido)\n    const tFactor = Math.min(1, elapsed / GAME_DURATION);\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\n    w.spawnInterval = 1.4 - 0.8 * tFactor;\n\n    // Avance del \"mundo\"\n    w.worldX += w.speed * dt;\n\n    // FÃ­sica del jugador\n    p.vy += w.gravity * dt;\n    p.y += p.vy * dt;\n\n    // Suelo\n    const groundY = w.groundY - p.h;\n    if (p.y >= groundY) {\n      p.y = groundY;\n      p.vy = 0;\n      p.onGround = true;\n    } else {\n      p.onGround = false;\n    }\n\n    // Spawning de obstÃ¡culos\n    w.spawnTimer -= dt;\n    if (w.spawnTimer <= 0) {\n      spawnObstacle(w);\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\n    }\n\n    // Colisiones + puntuaciÃ³n\n    for (const o of w.obstacles) {\n      const sx = o.x - w.worldX + p.x;\n      o.screenX = sx;\n      if (!o.scored && sx + o.w < p.x) {\n        o.scored = true;\n        // setScore((s) => s + 100);\n        SCORE.current += 100;\n      }\n      const px1 = p.x,\n        px2 = p.x + p.w;\n      const py1 = p.y,\n        py2 = p.y + p.h;\n      const ox1 = sx,\n        ox2 = sx + o.w;\n      const oy1 = o.y,\n        oy2 = o.y + o.h;\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\n      if (collide) {\n        setStatus('gameover');\n        break;\n      }\n    }\n\n    // Limpiar obstÃ¡culos fuera de pantalla\n    w.obstacles = w.obstacles.filter(o => o.screenX > -120);\n\n    // PuntuaciÃ³n por distancia\n    // setScore((s) => s + Math.floor(w.speed * dt * 0.5));\n    SCORE.current += Math.floor(w.speed * dt * 0.5);\n  };\n  const render = (ctx, canvas) => {\n    const w = WORLD.current;\n    const p = w.player;\n\n    // FONDO base (cielo) o negro en intro\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    if (status === 'intro') {\n      ctx.fillStyle = '#000';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      drawIntro(ctx, canvas, INTRO.current.lines, INTRO.current.offset);\n      return;\n    }\n\n    // Fondo cielo\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    g.addColorStop(0, '#e8f0ff');\n    g.addColorStop(1, '#ffffff');\n    ctx.fillStyle = g;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Suelo\n    ctx.fillStyle = '#c7d2fe';\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\n\n    // ObstÃ¡culos\n    for (const o of w.obstacles) {\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\n    }\n\n    // Jugador\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching, skin);\n\n    // HUD\n    if (status === 'playing') {\n      ctx.fillStyle = '#334155';\n      ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n      ctx.fillText(`Puntos: ${Math.floor(SCORE.current)}`, 12, 18);\n      ctx.fillText(`Tiempo: ${formatTime(TIMELEFT.current)}`, 12, 36);\n    }\n    if (status === 'gameover') {\n      drawOverlay(ctx, canvas, 'Â¡Ups! Te has tropezado', 'Pulsa R para volver al menÃº');\n    } else if (status === 'win') {\n      drawOverlay(ctx, canvas, `Â¡Llegaste a tiempo! ðŸ’’`, `PuntuaciÃ³n: ${Math.floor(SCORE.current)}. Pulsa R para volver al menÃº`);\n    }\n  };\n\n  // Iniciar mÃºsica tras interacciÃ³n del usuario\n  const startMusic = async () => {\n    if (AUDIO.current.playing) return;\n    if (!AUDIO.current.ctx) {\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\n      if (!AudioCtx) return; // no soportado\n      AUDIO.current.ctx = new AudioCtx();\n      AUDIO.current.gain = AUDIO.current.ctx.createGain();\n      AUDIO.current.gain.gain.value = AUDIO.current.muted ? 0 : BASE_VOL;\n      AUDIO.current.gain.connect(AUDIO.current.ctx.destination);\n    }\n    const ctx = AUDIO.current.ctx;\n    // Lead\n    const lead = ctx.createOscillator();\n    lead.type = 'triangle';\n    lead.connect(AUDIO.current.gain);\n    // Bass\n    const bass = ctx.createOscillator();\n    bass.type = 'square';\n    const bassGain = ctx.createGain();\n    bassGain.gain.value = 0.4; // mÃ¡s bajo que el lead\n    bass.connect(bassGain).connect(AUDIO.current.gain);\n    lead.start();\n    bass.start();\n    AUDIO.current.lead = lead;\n    AUDIO.current.bass = bass;\n    AUDIO.current.playing = true;\n\n    // PequeÃ±a melodÃ­a en C mayor\n    const notes = [261.63, 293.66, 329.63, 392.0, 440.0, 392.0, 329.63, 293.66];\n    const bassNotes = [130.81, 98.0, 146.83, 98.0];\n    AUDIO.current.step = 0;\n    AUDIO.current.timer = setInterval(() => {\n      if (!AUDIO.current.playing) return;\n      const i = AUDIO.current.step % notes.length;\n      const j = Math.floor(AUDIO.current.step / 2) % bassNotes.length;\n      // Cambiar frecuencias suavemente\n      try {\n        lead.frequency.setTargetAtTime(notes[i], ctx.currentTime, 0.01);\n        bass.frequency.setTargetAtTime(bassNotes[j], ctx.currentTime, 0.01);\n      } catch {}\n      AUDIO.current.step++;\n    }, 400);\n  };\n  const stopMusic = () => {\n    if (AUDIO.current.timer) {\n      clearInterval(AUDIO.current.timer);\n      AUDIO.current.timer = null;\n    }\n    if (AUDIO.current.lead) {\n      try {\n        AUDIO.current.lead.stop();\n      } catch {}\n      AUDIO.current.lead.disconnect();\n      AUDIO.current.lead = null;\n    }\n    if (AUDIO.current.bass) {\n      try {\n        AUDIO.current.bass.stop();\n      } catch {}\n      AUDIO.current.bass.disconnect();\n      AUDIO.current.bass = null;\n    }\n    AUDIO.current.playing = false;\n  };\n  const toggleMute = async () => {\n    // Si aÃºn no estÃ¡ creada, iniciamos mÃºsica con la pulsaciÃ³n del botÃ³n\n    if (!AUDIO.current.ctx) await startMusic();\n    AUDIO.current.muted = !AUDIO.current.muted;\n    setMuted(AUDIO.current.muted);\n    if (AUDIO.current.gain) {\n      AUDIO.current.gain.gain.value = AUDIO.current.muted ? 0 : BASE_VOL;\n    }\n  };\n  useEffect(() => {\n    // Limpieza al desmontar\n    return () => {\n      stopMusic();\n      if (AUDIO.current.ctx) {\n        try {\n          AUDIO.current.ctx.close();\n        } catch {}\n        AUDIO.current.ctx = null;\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      maxWidth: 860,\n      margin: '0 auto',\n      padding: '1rem',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '.5rem'\n      },\n      children: \"Camino a la iglesia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 7\n    }, this), status === 'menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        inset: 0,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        background: 'linear-gradient(135deg, rgba(255,255,255,.95), rgba(238,242,255,.95))',\n        zIndex: 5,\n        borderRadius: 12\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 'min(92%, 560px)',\n          padding: '1.25rem',\n          borderRadius: 12,\n          boxShadow: '0 8px 28px rgba(0,0,0,.18)',\n          background: 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0,\n            textAlign: 'center'\n          },\n          children: \"Elige tu personaje\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '1rem',\n            justifyContent: 'center',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSkin('novio'),\n            className: skin === 'novio' ? 'active' : '',\n            style: skinBtnStyle(skin === 'novio'),\n            children: \"\\uD83E\\uDD35 Novio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSkin('novia'),\n            className: skin === 'novia' ? 'active' : '',\n            style: skinBtnStyle(skin === 'novia'),\n            children: \"\\uD83D\\uDC70 Novia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            color: '#64748b',\n            marginTop: 0\n          },\n          children: \"Llega a la iglesia esquivando obst\\xE1culos en 5 minutos. El juego acelerar\\xE1 poco a poco.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePlayFullscreen,\n            style: {\n              background: 'linear-gradient(135deg, #6366f1, #8b5cf6)',\n              color: 'white',\n              border: 0,\n              padding: '.75rem 1.25rem',\n              borderRadius: 10,\n              fontWeight: 700,\n              cursor: 'pointer',\n              boxShadow: '0 6px 18px rgba(99,102,241,.35)'\n            },\n            children: \"\\u25B6 Jugar en pantalla completa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: 12,\n        overflow: 'hidden',\n        boxShadow: '0 6px 24px rgba(0,0,0,.12)',\n        background: 'white',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleMute,\n        \"aria-label\": muted ? 'Activar sonido' : 'Silenciar sonido',\n        style: {\n          position: 'absolute',\n          right: 8,\n          top: 8,\n          zIndex: 8,\n          background: 'rgba(0,0,0,.55)',\n          color: '#fff',\n          border: 0,\n          borderRadius: 999,\n          width: 36,\n          height: 36,\n          cursor: 'pointer'\n        },\n        children: muted ? 'ðŸ”‡' : 'ðŸ”Š'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: 800,\n        height: 260,\n        style: {\n          width: '100%',\n          display: 'block',\n          background: status === 'intro' ? '#000' : 'linear-gradient(#eef2ff, #fff)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this), (status === 'gameover' || status === 'win') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          inset: 0,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 7\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: 'rgba(17,24,39,.88)',\n            color: '#fff',\n            padding: '1rem 1.25rem',\n            borderRadius: 12,\n            boxShadow: '0 8px 28px rgba(0,0,0,.35)',\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              fontSize: 18,\n              marginBottom: 8\n            },\n            children: status === 'win' ? 'Â¡Llegaste a tiempo! ðŸ’’' : 'Â¡Ups! Te has tropezado'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 14,\n              opacity: .9,\n              marginBottom: 12\n            },\n            children: [\"Puntuaci\\xF3n: \", Math.floor(SCORE.current)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRetry,\n            style: {\n              background: '#22c55e',\n              color: '#0b1a0f',\n              border: 0,\n              padding: '.5rem 1rem',\n              borderRadius: 10,\n              fontWeight: 700,\n              cursor: 'pointer'\n            },\n            children: \"\\u21BB Reintentar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 432,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"ibmnpVrRCsIn0/Ndk3kcfUJSxGo=\");\n_c = Game;\nfunction skinBtnStyle(active) {\n  return {\n    background: active ? '#111827' : '#f3f4f6',\n    color: active ? 'white' : '#111827',\n    border: '1px solid ' + (active ? '#111827' : '#e5e7eb'),\n    padding: '.6rem 1rem',\n    borderRadius: 10,\n    cursor: 'pointer',\n    minWidth: 120,\n    fontWeight: 600\n  };\n}\nfunction spawnObstacle(w) {\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\n  const type = Math.random() < 0.55 ? 'low' : 'high';\n  if (type === 'low') {\n    const width = 26 + Math.random() * 16;\n    const height = 22 + Math.random() * 20;\n    const x = w.worldX + 900 + Math.random() * 80;\n    const y = w.groundY - height;\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  } else {\n    const width = 80 + Math.random() * 60;\n    const height = 18;\n    const x = w.worldX + 900 + Math.random() * 80;\n    // altura que obliga a agacharse (por encima de altura de pie)\n    const y = w.groundY - (42 + 12);\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  }\n}\nfunction formatTime(t) {\n  const s = Math.max(0, Math.floor(t));\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\n  const ss = String(s % 60).padStart(2, '0');\n  return `${mm}:${ss}`;\n}\nfunction drawObstacleLow(ctx, x, y, w, h) {\n  ctx.save();\n  ctx.fillStyle = '#94a3b8';\n  ctx.strokeStyle = '#475569';\n  ctx.lineWidth = 2;\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.stroke();\n  ctx.restore();\n}\nfunction drawObstacleHigh(ctx, x, y, w, h) {\n  ctx.save();\n  // postes laterales\n  ctx.fillStyle = '#9ca3af';\n  roundRect(ctx, x, y + h - 30, 4, 30, 2);\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2);\n  ctx.fill();\n  // barra (verde temÃ¡tica)\n  ctx.fillStyle = '#22c55e';\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.restore();\n}\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching, skin) {\n  ctx.save();\n  if (skin === 'novia') {\n    // vestido\n    ctx.fillStyle = '#f8fafc';\n    roundRect(ctx, x - 2, y + h * 0.35, w + 4, h * 0.65, 10);\n    ctx.fill();\n    // torso\n    ctx.fillStyle = '#e5e7eb';\n    roundRect(ctx, x, y, w, h * 0.45, 8);\n    ctx.fill();\n    // cabeza\n    ctx.fillStyle = '#fde68a';\n    ctx.beginPath();\n    const headY = crouching ? y - 6 : y - 8;\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\n    ctx.fill();\n    // velo\n    ctx.globalAlpha = 0.6;\n    ctx.fillStyle = '#e0f2fe';\n    roundRect(ctx, x - 6, y - 6, w + 12, 16, 8);\n    ctx.fill();\n    ctx.globalAlpha = 1;\n  } else {\n    // traje\n    ctx.fillStyle = '#1f2937';\n    roundRect(ctx, x, y, w, h, 8);\n    ctx.fill();\n    // cabeza\n    ctx.fillStyle = '#fde68a';\n    ctx.beginPath();\n    const headY = crouching ? y - 6 : y - 8;\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\n    ctx.fill();\n    // corbata\n    ctx.fillStyle = '#ef4444';\n    ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\n  }\n  // sombra al saltar\n  if (jumping) {\n    ctx.globalAlpha = 0.2;\n    ctx.fillStyle = '#000';\n    ctx.beginPath();\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.globalAlpha = 1;\n  }\n  ctx.restore();\n}\nfunction drawIntro(ctx, canvas, lines, offset) {\n  ctx.save();\n  ctx.fillStyle = '#10b981'; // verde\n  ctx.textAlign = 'center';\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  const centerX = canvas.width / 2;\n  let y = canvas.height + offset;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    const scale = 1 - i * 0.05; // ligera perspectiva\n    ctx.save();\n    ctx.translate(centerX, y);\n    ctx.scale(scale, scale);\n    ctx.fillText(line, 0, 0);\n    ctx.restore();\n    y += 36;\n  }\n  ctx.restore();\n}\nfunction drawOverlay(ctx, canvas, title, subtitle) {\n  ctx.save();\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = '#fff';\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.textAlign = 'center';\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\n  ctx.restore();\n}\nfunction roundRect(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n}\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","Game","_s","containerRef","canvasRef","status","setStatus","skin","setSkin","score","setScore","timeLeft","setTimeLeft","GAME_DURATION","SCORE","TIMELEFT","INTRO_SHOWN","AUDIO","ctx","gain","playing","muted","lead","bass","timer","step","setMuted","BASE_VOL","INTRO","offset","speed","lines","WORLD","maxSpeed","gravity","jumpV","fastFallBoost","groundY","player","x","y","w","h","vy","onGround","crouching","worldX","obstacles","startTs","lastTs","spawnTimer","spawnInterval","resetWorld","current","canvas","getContext","rafId","loop","ts","dt","Math","min","update","render","requestAnimationFrame","cancelAnimationFrame","onKeyDown","e","repeat","code","jump","crouch","onKeyUp","onClick","window","addEventListener","passive","removeEventListener","p","on","prevBottom","handlePlayFullscreen","_containerRef$current","requestFullscreen","startMusic","startPlaying","handleRetry","elapsed","remaining","max","tFactor","spawnObstacle","random","o","sx","screenX","scored","px1","px2","py1","py2","ox1","ox2","oy1","oy2","collide","filter","floor","clearRect","width","height","fillStyle","fillRect","drawIntro","g","createLinearGradient","addColorStop","type","drawObstacleLow","drawObstacleHigh","drawGroom","font","fillText","formatTime","drawOverlay","AudioCtx","AudioContext","webkitAudioContext","createGain","value","connect","destination","createOscillator","bassGain","start","notes","bassNotes","setInterval","i","length","j","frequency","setTargetAtTime","currentTime","stopMusic","clearInterval","stop","disconnect","toggleMute","close","ref","style","maxWidth","margin","padding","position","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","inset","display","alignItems","justifyContent","background","zIndex","borderRadius","boxShadow","marginTop","gap","className","skinBtnStyle","color","border","fontWeight","cursor","overflow","right","top","fontSize","opacity","_c","active","minWidth","push","t","s","mm","String","padStart","ss","save","strokeStyle","lineWidth","roundRect","fill","stroke","restore","jumping","beginPath","headY","arc","PI","globalAlpha","ellipse","centerX","line","scale","translate","title","subtitle","r","moveTo","arcTo","closePath","$RefreshReg$"],"sources":["C:/Users/DanielGarcÃ­aCarabelo/Downloads/pag web boda 2.0/html/webreact/src/components/Game.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\n// Minijuego 2D: El novio/la novia quiere llegar a la iglesia esquivando obstÃ¡culos\r\n// Controles: Space o Flecha â†‘ para saltar. MantÃ©n Flecha â†“ para agacharte (en el aire: caÃ­da rÃ¡pida). R para reiniciar.\r\nexport default function Game() {\r\n  const containerRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // Estados de juego: menu | intro | playing | win | gameover\r\n  const [status, setStatus] = useState('menu');\r\n  const [skin, setSkin] = useState('novio'); // 'novio' | 'novia'\r\n  const [score, setScore] = useState(0);\r\n  const [timeLeft, setTimeLeft] = useState(300); // 5 minutos\r\n\r\n  const GAME_DURATION = 300; // 5 min gameplay (la intro no consume tiempo)\r\n\r\n  // NUEVO: refs para evitar valores congelados en el canvas\r\n  const SCORE = useRef(0);\r\n  const TIMELEFT = useRef(GAME_DURATION);\r\n  // NUEVO: mostrar la intro solo una vez\r\n  const INTRO_SHOWN = useRef(false);\r\n\r\n  // NUEVO: Audio (mÃºsica de fondo generativa con WebAudio)\r\n  const AUDIO = useRef({ ctx: null, gain: null, playing: false, muted: false, lead: null, bass: null, timer: null, step: 0 });\r\n  const [muted, setMuted] = useState(false);\r\n  const BASE_VOL = 0.02;\r\n\r\n  // Intro tipo \"Star Wars\"\r\n  const INTRO = useRef({\r\n    offset: 0,\r\n    speed: 60, // px/s desplazamiento hacia arriba\r\n    lines: [\r\n      'En una galaxia muy, muy cercana...',\r\n      'Dos estrellas destinadas a unirse brillan con fuerza.',\r\n      'El gran dÃ­a ha llegado y todos esperan en la iglesia.',\r\n      'Ayuda a la pareja a llegar a tiempo sorteando obstÃ¡culos...',\r\n      'Controles: â†‘ o ESPACIO para saltar, â†“ para agacharte o caer rÃ¡pido.',\r\n      'Â¡Que la fuerza del amor te acompaÃ±e!'\r\n    ],\r\n  });\r\n\r\n  // Estado del mundo\r\n  const WORLD = useRef({\r\n    speed: 220,\r\n    maxSpeed: 380,\r\n    gravity: 1700,\r\n    jumpV: 620,\r\n    fastFallBoost: 2200,\r\n    groundY: 220,\r\n    player: { x: 80, y: 0, w: 32, h: 42, vy: 0, onGround: true, crouching: false },\r\n    worldX: 0,\r\n    obstacles: [],\r\n    startTs: 0,\r\n    lastTs: 0,\r\n    spawnTimer: 0,\r\n    spawnInterval: 1.4,\r\n  });\r\n\r\n  // Reset base (sin cambiar estado)\r\n  const resetWorld = () => {\r\n    setScore(0);\r\n    setTimeLeft(GAME_DURATION);\r\n    WORLD.current.worldX = 0;\r\n    WORLD.current.lastTs = 0;\r\n    WORLD.current.startTs = 0;\r\n    WORLD.current.speed = 220;\r\n    WORLD.current.spawnInterval = 1.4;\r\n    WORLD.current.spawnTimer = 0.8;\r\n    WORLD.current.obstacles = [];\r\n    WORLD.current.player = { x: 80, y: WORLD.current.groundY - 42, w: 32, h: 42, vy: 0, onGround: true, crouching: false };\r\n    // NUEVO: sincronizar refs\r\n    SCORE.current = 0;\r\n    TIMELEFT.current = GAME_DURATION;\r\n  };\r\n\r\n  useEffect(() => {\r\n    // init: mostrar menÃº\r\n    resetWorld();\r\n    INTRO.current.offset = 320; // arranca fuera de la pantalla por abajo\r\n  }, []);\r\n\r\n  // Bucle de juego y render\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    let rafId;\r\n    const loop = (ts) => {\r\n      if (!WORLD.current.lastTs) {\r\n        WORLD.current.lastTs = ts;\r\n        if (!WORLD.current.startTs && status === 'playing') WORLD.current.startTs = ts;\r\n      }\r\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\r\n      WORLD.current.lastTs = ts;\r\n\r\n      update(dt, ts);\r\n      render(ctx, canvas);\r\n      rafId = requestAnimationFrame(loop);\r\n    };\r\n\r\n    rafId = requestAnimationFrame(loop);\r\n    return () => cancelAnimationFrame(rafId);\r\n  }, [status]);\r\n\r\n  // NUEVO: cada vez que entramos en intro, reiniciar offset para que se vea siempre\r\n  useEffect(() => {\r\n    if (status === 'intro') {\r\n      INTRO.current.offset = 320;\r\n    }\r\n  }, [status]);\r\n\r\n  // Entradas\r\n  useEffect(() => {\r\n    const onKeyDown = (e) => {\r\n      if (e.repeat) return;\r\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\r\n      if (e.code === 'ArrowDown') {\r\n        if (status === 'playing') crouch(true);\r\n      }\r\n      if (e.code === 'KeyR') {\r\n        if (status === 'playing' || status === 'gameover' || status === 'win') {\r\n          resetWorld();\r\n          setStatus('menu');\r\n        }\r\n      }\r\n    };\r\n    const onKeyUp = (e) => {\r\n      if (e.code === 'ArrowDown') crouch(false);\r\n    };\r\n    const onClick = () => { if (status === 'playing') jump(); };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    window.addEventListener('keyup', onKeyUp);\r\n    window.addEventListener('touchstart', onClick, { passive: true });\r\n    window.addEventListener('mousedown', onClick);\r\n    return () => {\r\n      window.removeEventListener('keydown', onKeyDown);\r\n      window.removeEventListener('keyup', onKeyUp);\r\n      window.removeEventListener('touchstart', onClick);\r\n      window.removeEventListener('mousedown', onClick);\r\n    };\r\n  }, [status]);\r\n\r\n  const jump = () => {\r\n    const p = WORLD.current.player;\r\n    if (p.onGround) {\r\n      p.vy = -WORLD.current.jumpV;\r\n      p.onGround = false;\r\n    }\r\n  };\r\n\r\n  const crouch = (on) => {\r\n    const p = WORLD.current.player;\r\n    if (on) {\r\n      if (!p.onGround) {\r\n        p.vy += WORLD.current.fastFallBoost * 0.04; // caÃ­da rÃ¡pida\r\n      } else if (!p.crouching) {\r\n        p.crouching = true;\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 26;\r\n        p.y = prevBottom - p.h;\r\n      }\r\n    } else {\r\n      if (p.crouching) {\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 42;\r\n        p.y = prevBottom - p.h;\r\n        p.crouching = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  // Acciones de UI\r\n  const handlePlayFullscreen = async () => {\r\n    try {\r\n      if (containerRef.current?.requestFullscreen) {\r\n        await containerRef.current.requestFullscreen();\r\n      }\r\n    } catch (e) { /* noop */ }\r\n    // Limpiar mundo antes de jugar\r\n    resetWorld();\r\n\r\n    // Iniciar mÃºsica en la interacciÃ³n de usuario\r\n    startMusic();\r\n\r\n    if (!INTRO_SHOWN.current) {\r\n      INTRO.current.offset = 320; // preparar intro\r\n      setStatus('intro');\r\n      INTRO_SHOWN.current = true; // marcar intro mostrada\r\n    } else {\r\n      startPlaying();\r\n    }\r\n  };\r\n\r\n  const startPlaying = () => {\r\n    // Reset de marcas de tiempo para que el cronÃ³metro cuente desde ahora\r\n    WORLD.current.lastTs = 0;\r\n    WORLD.current.startTs = 0;\r\n    setStatus('playing');\r\n  };\r\n\r\n  // NUEVO: reintentar sin repetir la intro\r\n  const handleRetry = () => {\r\n    resetWorld();\r\n    startPlaying();\r\n  };\r\n\r\n  const update = (dt, ts) => {\r\n    if (status === 'menu') return; // nada\r\n\r\n    if (status === 'intro') {\r\n      INTRO.current.offset -= INTRO.current.speed * dt;\r\n      // tras ~7-8s o cuando el texto sale por arriba, comenzamos\r\n      if (INTRO.current.offset < -120) startPlaying();\r\n      return;\r\n    }\r\n\r\n    if (status !== 'playing') return;\r\n\r\n    // Tiempo de juego\r\n    if (WORLD.current.startTs === 0) WORLD.current.startTs = ts;\r\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\r\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\r\n    // setTimeLeft(remaining);\r\n    TIMELEFT.current = remaining; // usar ref para el HUD del canvas\r\n    if (remaining <= 0.01) {\r\n      setStatus('win');\r\n      return;\r\n    }\r\n\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // AceleraciÃ³n progresiva (cada vez mÃ¡s rÃ¡pido)\r\n    const tFactor = Math.min(1, elapsed / GAME_DURATION);\r\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\r\n    w.spawnInterval = 1.4 - 0.8 * tFactor;\r\n\r\n    // Avance del \"mundo\"\r\n    w.worldX += w.speed * dt;\r\n\r\n    // FÃ­sica del jugador\r\n    p.vy += w.gravity * dt;\r\n    p.y += p.vy * dt;\r\n\r\n    // Suelo\r\n    const groundY = w.groundY - p.h;\r\n    if (p.y >= groundY) {\r\n      p.y = groundY;\r\n      p.vy = 0;\r\n      p.onGround = true;\r\n    } else {\r\n      p.onGround = false;\r\n    }\r\n\r\n    // Spawning de obstÃ¡culos\r\n    w.spawnTimer -= dt;\r\n    if (w.spawnTimer <= 0) {\r\n      spawnObstacle(w);\r\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\r\n    }\r\n\r\n    // Colisiones + puntuaciÃ³n\r\n    for (const o of w.obstacles) {\r\n      const sx = o.x - w.worldX + p.x;\r\n      o.screenX = sx;\r\n\r\n      if (!o.scored && sx + o.w < p.x) {\r\n        o.scored = true;\r\n        // setScore((s) => s + 100);\r\n        SCORE.current += 100;\r\n      }\r\n\r\n      const px1 = p.x, px2 = p.x + p.w;\r\n      const py1 = p.y, py2 = p.y + p.h;\r\n      const ox1 = sx, ox2 = sx + o.w;\r\n      const oy1 = o.y, oy2 = o.y + o.h;\r\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\r\n      if (collide) {\r\n        setStatus('gameover');\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Limpiar obstÃ¡culos fuera de pantalla\r\n    w.obstacles = w.obstacles.filter((o) => o.screenX > -120);\r\n\r\n    // PuntuaciÃ³n por distancia\r\n    // setScore((s) => s + Math.floor(w.speed * dt * 0.5));\r\n    SCORE.current += Math.floor(w.speed * dt * 0.5);\r\n  };\r\n\r\n  const render = (ctx, canvas) => {\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // FONDO base (cielo) o negro en intro\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    if (status === 'intro') {\r\n      ctx.fillStyle = '#000';\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n      drawIntro(ctx, canvas, INTRO.current.lines, INTRO.current.offset);\r\n      return;\r\n    }\r\n\r\n    // Fondo cielo\r\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n    g.addColorStop(0, '#e8f0ff');\r\n    g.addColorStop(1, '#ffffff');\r\n    ctx.fillStyle = g;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Suelo\r\n    ctx.fillStyle = '#c7d2fe';\r\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\r\n\r\n    // ObstÃ¡culos\r\n    for (const o of w.obstacles) {\r\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\r\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);\r\n      else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\r\n    }\r\n\r\n    // Jugador\r\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching, skin);\r\n\r\n    // HUD\r\n    if (status === 'playing') {\r\n      ctx.fillStyle = '#334155';\r\n      ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n      ctx.fillText(`Puntos: ${Math.floor(SCORE.current)}`, 12, 18);\r\n      ctx.fillText(`Tiempo: ${formatTime(TIMELEFT.current)}`, 12, 36);\r\n    }\r\n\r\n    if (status === 'gameover') {\r\n      drawOverlay(ctx, canvas, 'Â¡Ups! Te has tropezado', 'Pulsa R para volver al menÃº');\r\n    } else if (status === 'win') {\r\n      drawOverlay(ctx, canvas, `Â¡Llegaste a tiempo! ðŸ’’`, `PuntuaciÃ³n: ${Math.floor(SCORE.current)}. Pulsa R para volver al menÃº`);\r\n    }\r\n  };\r\n\r\n  // Iniciar mÃºsica tras interacciÃ³n del usuario\r\n  const startMusic = async () => {\r\n    if (AUDIO.current.playing) return;\r\n    if (!AUDIO.current.ctx) {\r\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\r\n      if (!AudioCtx) return; // no soportado\r\n      AUDIO.current.ctx = new AudioCtx();\r\n      AUDIO.current.gain = AUDIO.current.ctx.createGain();\r\n      AUDIO.current.gain.gain.value = AUDIO.current.muted ? 0 : BASE_VOL;\r\n      AUDIO.current.gain.connect(AUDIO.current.ctx.destination);\r\n    }\r\n\r\n    const ctx = AUDIO.current.ctx;\r\n    // Lead\r\n    const lead = ctx.createOscillator();\r\n    lead.type = 'triangle';\r\n    lead.connect(AUDIO.current.gain);\r\n    // Bass\r\n    const bass = ctx.createOscillator();\r\n    bass.type = 'square';\r\n    const bassGain = ctx.createGain();\r\n    bassGain.gain.value = 0.4; // mÃ¡s bajo que el lead\r\n    bass.connect(bassGain).connect(AUDIO.current.gain);\r\n\r\n    lead.start();\r\n    bass.start();\r\n\r\n    AUDIO.current.lead = lead;\r\n    AUDIO.current.bass = bass;\r\n    AUDIO.current.playing = true;\r\n\r\n    // PequeÃ±a melodÃ­a en C mayor\r\n    const notes = [261.63, 293.66, 329.63, 392.0, 440.0, 392.0, 329.63, 293.66];\r\n    const bassNotes = [130.81, 98.0, 146.83, 98.0];\r\n    AUDIO.current.step = 0;\r\n\r\n    AUDIO.current.timer = setInterval(() => {\r\n      if (!AUDIO.current.playing) return;\r\n      const i = AUDIO.current.step % notes.length;\r\n      const j = Math.floor(AUDIO.current.step / 2) % bassNotes.length;\r\n      // Cambiar frecuencias suavemente\r\n      try {\r\n        lead.frequency.setTargetAtTime(notes[i], ctx.currentTime, 0.01);\r\n        bass.frequency.setTargetAtTime(bassNotes[j], ctx.currentTime, 0.01);\r\n      } catch {}\r\n      AUDIO.current.step++;\r\n    }, 400);\r\n  };\r\n\r\n  const stopMusic = () => {\r\n    if (AUDIO.current.timer) {\r\n      clearInterval(AUDIO.current.timer);\r\n      AUDIO.current.timer = null;\r\n    }\r\n    if (AUDIO.current.lead) {\r\n      try { AUDIO.current.lead.stop(); } catch {}\r\n      AUDIO.current.lead.disconnect();\r\n      AUDIO.current.lead = null;\r\n    }\r\n    if (AUDIO.current.bass) {\r\n      try { AUDIO.current.bass.stop(); } catch {}\r\n      AUDIO.current.bass.disconnect();\r\n      AUDIO.current.bass = null;\r\n    }\r\n    AUDIO.current.playing = false;\r\n  };\r\n\r\n  const toggleMute = async () => {\r\n    // Si aÃºn no estÃ¡ creada, iniciamos mÃºsica con la pulsaciÃ³n del botÃ³n\r\n    if (!AUDIO.current.ctx) await startMusic();\r\n    AUDIO.current.muted = !AUDIO.current.muted;\r\n    setMuted(AUDIO.current.muted);\r\n    if (AUDIO.current.gain) {\r\n      AUDIO.current.gain.gain.value = AUDIO.current.muted ? 0 : BASE_VOL;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Limpieza al desmontar\r\n    return () => {\r\n      stopMusic();\r\n      if (AUDIO.current.ctx) {\r\n        try { AUDIO.current.ctx.close(); } catch {}\r\n        AUDIO.current.ctx = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ maxWidth: 860, margin: '0 auto', padding: '1rem', position: 'relative' }}>\r\n      <h2 style={{ textAlign: 'center', marginBottom: '.5rem' }}>Camino a la iglesia</h2>\r\n      {/* Panel de control/menÃº */}\r\n      {status === 'menu' && (\r\n        <div style={{\r\n          position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n          background: 'linear-gradient(135deg, rgba(255,255,255,.95), rgba(238,242,255,.95))',\r\n          zIndex: 5, borderRadius: 12\r\n        }}>\r\n          <div style={{ width: 'min(92%, 560px)', padding: '1.25rem', borderRadius: 12, boxShadow: '0 8px 28px rgba(0,0,0,.18)', background: 'white' }}>\r\n            <h3 style={{ marginTop: 0, textAlign: 'center' }}>Elige tu personaje</h3>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', marginBottom: '1rem' }}>\r\n              <button\r\n                onClick={() => setSkin('novio')}\r\n                className={skin === 'novio' ? 'active' : ''}\r\n                style={skinBtnStyle(skin === 'novio')}\r\n              >\r\n                ðŸ¤µ Novio\r\n              </button>\r\n              <button\r\n                onClick={() => setSkin('novia')}\r\n                className={skin === 'novia' ? 'active' : ''}\r\n                style={skinBtnStyle(skin === 'novia')}\r\n              >\r\n                ðŸ‘° Novia\r\n              </button>\r\n            </div>\r\n            <p style={{ textAlign: 'center', color: '#64748b', marginTop: 0 }}>\r\n              Llega a la iglesia esquivando obstÃ¡culos en 5 minutos. El juego acelerarÃ¡ poco a poco.\r\n            </p>\r\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n              <button onClick={handlePlayFullscreen} style={{\r\n                background: 'linear-gradient(135deg, #6366f1, #8b5cf6)', color: 'white', border: 0, padding: '.75rem 1.25rem',\r\n                borderRadius: 10, fontWeight: 700, cursor: 'pointer', boxShadow: '0 6px 18px rgba(99,102,241,.35)'\r\n              }}>â–¶ Jugar en pantalla completa</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ borderRadius: 12, overflow: 'hidden', boxShadow: '0 6px 24px rgba(0,0,0,.12)', background: 'white', position: 'relative' }}>\r\n        {/* BotÃ³n de Mute */}\r\n        <button onClick={toggleMute} aria-label={muted ? 'Activar sonido' : 'Silenciar sonido'}\r\n          style={{ position: 'absolute', right: 8, top: 8, zIndex: 8, background: 'rgba(0,0,0,.55)', color: '#fff', border: 0, borderRadius: 999, width: 36, height: 36, cursor: 'pointer' }}>\r\n          {muted ? 'ðŸ”‡' : 'ðŸ”Š'}\r\n        </button>\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={800}\r\n          height={260}\r\n          style={{ width: '100%', display: 'block', background: status === 'intro' ? '#000' : 'linear-gradient(#eef2ff, #fff)' }}\r\n        />\r\n        {/* NUEVO: overlay con botÃ³n Reintentar al terminar */}\r\n        {(status === 'gameover' || status === 'win') && (\r\n          <div style={{ position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 7 }}>\r\n            <div style={{ background: 'rgba(17,24,39,.88)', color: '#fff', padding: '1rem 1.25rem', borderRadius: 12, boxShadow: '0 8px 28px rgba(0,0,0,.35)', textAlign: 'center' }}>\r\n              <div style={{ fontWeight: 700, fontSize: 18, marginBottom: 8 }}>\r\n                {status === 'win' ? 'Â¡Llegaste a tiempo! ðŸ’’' : 'Â¡Ups! Te has tropezado'}\r\n              </div>\r\n              <div style={{ fontSize: 14, opacity: .9, marginBottom: 12 }}>\r\n                PuntuaciÃ³n: {Math.floor(SCORE.current)}\r\n              </div>\r\n              <button onClick={handleRetry} style={{ background: '#22c55e', color: '#0b1a0f', border: 0, padding: '.5rem 1rem', borderRadius: 10, fontWeight: 700, cursor: 'pointer' }}>â†» Reintentar</button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction skinBtnStyle(active) {\r\n  return {\r\n    background: active ? '#111827' : '#f3f4f6',\r\n    color: active ? 'white' : '#111827',\r\n    border: '1px solid ' + (active ? '#111827' : '#e5e7eb'),\r\n    padding: '.6rem 1rem',\r\n    borderRadius: 10,\r\n    cursor: 'pointer',\r\n    minWidth: 120,\r\n    fontWeight: 600,\r\n  };\r\n}\r\n\r\nfunction spawnObstacle(w) {\r\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\r\n  const type = Math.random() < 0.55 ? 'low' : 'high';\r\n  if (type === 'low') {\r\n    const width = 26 + Math.random() * 16;\r\n    const height = 22 + Math.random() * 20;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    const y = w.groundY - height;\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  } else {\r\n    const width = 80 + Math.random() * 60;\r\n    const height = 18;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    // altura que obliga a agacharse (por encima de altura de pie)\r\n    const y = w.groundY - (42 + 12);\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  }\r\n}\r\n\r\nfunction formatTime(t) {\r\n  const s = Math.max(0, Math.floor(t));\r\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\r\n  const ss = String(s % 60).padStart(2, '0');\r\n  return `${mm}:${ss}`;\r\n}\r\n\r\nfunction drawObstacleLow(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  ctx.fillStyle = '#94a3b8';\r\n  ctx.strokeStyle = '#475569';\r\n  ctx.lineWidth = 2;\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawObstacleHigh(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  // postes laterales\r\n  ctx.fillStyle = '#9ca3af';\r\n  roundRect(ctx, x, y + h - 30, 4, 30, 2);\r\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2);\r\n  ctx.fill();\r\n  // barra (verde temÃ¡tica)\r\n  ctx.fillStyle = '#22c55e';\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching, skin) {\r\n  ctx.save();\r\n  if (skin === 'novia') {\r\n    // vestido\r\n    ctx.fillStyle = '#f8fafc';\r\n    roundRect(ctx, x - 2, y + h * 0.35, w + 4, h * 0.65, 10);\r\n    ctx.fill();\r\n    // torso\r\n    ctx.fillStyle = '#e5e7eb';\r\n    roundRect(ctx, x, y, w, h * 0.45, 8);\r\n    ctx.fill();\r\n    // cabeza\r\n    ctx.fillStyle = '#fde68a';\r\n    ctx.beginPath();\r\n    const headY = crouching ? y - 6 : y - 8;\r\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // velo\r\n    ctx.globalAlpha = 0.6;\r\n    ctx.fillStyle = '#e0f2fe';\r\n    roundRect(ctx, x - 6, y - 6, w + 12, 16, 8);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  } else {\r\n    // traje\r\n    ctx.fillStyle = '#1f2937';\r\n    roundRect(ctx, x, y, w, h, 8);\r\n    ctx.fill();\r\n    // cabeza\r\n    ctx.fillStyle = '#fde68a';\r\n    ctx.beginPath();\r\n    const headY = crouching ? y - 6 : y - 8;\r\n    ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // corbata\r\n    ctx.fillStyle = '#ef4444';\r\n    ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\r\n  }\r\n  // sombra al saltar\r\n  if (jumping) {\r\n    ctx.globalAlpha = 0.2;\r\n    ctx.fillStyle = '#000';\r\n    ctx.beginPath();\r\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawIntro(ctx, canvas, lines, offset) {\r\n  ctx.save();\r\n  ctx.fillStyle = '#10b981'; // verde\r\n  ctx.textAlign = 'center';\r\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  const centerX = canvas.width / 2;\r\n  let y = canvas.height + offset;\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i];\r\n    const scale = 1 - i * 0.05; // ligera perspectiva\r\n    ctx.save();\r\n    ctx.translate(centerX, y);\r\n    ctx.scale(scale, scale);\r\n    ctx.fillText(line, 0, 0);\r\n    ctx.restore();\r\n    y += 36;\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawOverlay(ctx, canvas, title, subtitle) {\r\n  ctx.save();\r\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  ctx.fillStyle = '#fff';\r\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.textAlign = 'center';\r\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\r\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\r\n  ctx.restore();\r\n}\r\n\r\nfunction roundRect(ctx, x, y, w, h, r) {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x + r, y);\r\n  ctx.arcTo(x + w, y, x + w, y + h, r);\r\n  ctx.arcTo(x + w, y + h, x, y + h, r);\r\n  ctx.arcTo(x, y + h, x, y, r);\r\n  ctx.arcTo(x, y, x + w, y, r);\r\n  ctx.closePath();\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}