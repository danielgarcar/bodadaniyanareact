{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DanielGarc\\xEDaCarabelo\\\\Downloads\\\\pag web boda 2.0\\\\html\\\\webreact\\\\src\\\\components\\\\Game.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\n\n// Minijuego 2D: El novio quiere llegar a la iglesia saltando y agachÃ¡ndose\n// Controles: Space o Flecha â†‘ para saltar. MantÃ©n Flecha â†“ para agacharte (en el aire: caÃ­da rÃ¡pida). R para reiniciar. Tap: saltar.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Game() {\n  _s();\n  const canvasRef = useRef(null);\n  const [status, setStatus] = useState('playing'); // playing | win | gameover\n  const [score, setScore] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(300); // segundos restantes (5 min)\n\n  const GAME_DURATION = 300; // 5 minutos\n\n  // Estado del mundo\n  const WORLD = useRef({\n    width: 999999,\n    // infinito prÃ¡ctico\n    speed: 220,\n    // px/s inicial\n    maxSpeed: 380,\n    // aceleraciÃ³n suave con el tiempo\n    gravity: 1700,\n    // px/s^2\n    jumpV: 620,\n    // salto\n    fastFallBoost: 2200,\n    // refuerzo de caÃ­da cuando se pulsa â†“ en el aire\n    groundY: 220,\n    player: {\n      x: 80,\n      y: 0,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    },\n    worldX: 0,\n    obstacles: [],\n    startTs: 0,\n    lastTs: 0,\n    spawnTimer: 0,\n    spawnInterval: 1.4 // segundos, irÃ¡ bajando\n  });\n\n  // Inicializar\n  useEffect(() => {\n    reset(true);\n  }, []);\n\n  // Bucle de juego y render\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    let rafId;\n    const loop = ts => {\n      if (!WORLD.current.lastTs) {\n        WORLD.current.lastTs = ts;\n        if (!WORLD.current.startTs) WORLD.current.startTs = ts;\n      }\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\n      WORLD.current.lastTs = ts;\n      update(dt, ts);\n      render(ctx, canvas);\n      rafId = requestAnimationFrame(loop);\n    };\n    rafId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(rafId);\n  }, [status]);\n\n  // Entradas\n  useEffect(() => {\n    const onKeyDown = e => {\n      if (e.repeat) return;\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\n      if (e.code === 'ArrowDown') {\n        if (status === 'playing') crouch(true);\n      }\n      if (e.code === 'KeyR') reset();\n    };\n    const onKeyUp = e => {\n      if (e.code === 'ArrowDown') crouch(false);\n    };\n    const onClick = () => {\n      if (status === 'playing') jump();\n    };\n    window.addEventListener('keydown', onKeyDown);\n    window.addEventListener('keyup', onKeyUp);\n    window.addEventListener('touchstart', onClick, {\n      passive: true\n    });\n    window.addEventListener('mousedown', onClick);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n      window.removeEventListener('keyup', onKeyUp);\n      window.removeEventListener('touchstart', onClick);\n      window.removeEventListener('mousedown', onClick);\n    };\n  }, [status]);\n  const jump = () => {\n    const p = WORLD.current.player;\n    if (p.onGround) {\n      p.vy = -WORLD.current.jumpV;\n      p.onGround = false;\n    }\n  };\n  const crouch = on => {\n    const p = WORLD.current.player;\n    if (on) {\n      if (!p.onGround) {\n        // caÃ­da rÃ¡pida si estÃ¡ en el aire\n        p.vy += WORLD.current.fastFallBoost * 0.04; // impulso corto\n      } else if (!p.crouching) {\n        // agacharse reduce altura\n        p.crouching = true;\n        const prevBottom = p.y + p.h;\n        p.h = 26; // altura agachado\n        p.y = prevBottom - p.h; // mantener pies en el suelo\n      }\n    } else {\n      if (p.crouching) {\n        const prevBottom = p.y + p.h;\n        p.h = 42;\n        p.y = prevBottom - p.h;\n        p.crouching = false;\n      }\n    }\n  };\n  const reset = (initial = false) => {\n    setStatus('playing');\n    setScore(0);\n    setTimeLeft(GAME_DURATION);\n    WORLD.current.worldX = 0;\n    WORLD.current.lastTs = 0;\n    WORLD.current.startTs = 0;\n    WORLD.current.speed = 220;\n    WORLD.current.spawnInterval = 1.4;\n    WORLD.current.spawnTimer = 0.5;\n    WORLD.current.obstacles = [];\n    WORLD.current.player = {\n      x: 80,\n      y: WORLD.current.groundY - 42,\n      w: 32,\n      h: 42,\n      vy: 0,\n      onGround: true,\n      crouching: false\n    };\n    if (!initial) {\n      var _canvasRef$current;\n      // forzar un frame limpio\n      const ctx = (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getContext('2d');\n      if (ctx && canvasRef.current) {\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n      }\n    }\n  };\n  const update = (dt, ts) => {\n    if (status !== 'playing') return;\n\n    // Tiempo\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\n    setTimeLeft(remaining);\n    if (remaining <= 0.01) {\n      setStatus('win');\n      return;\n    }\n    const w = WORLD.current;\n    const p = w.player;\n\n    // Aumentar velocidad y frecuencia de spawn progresivamente\n    const tFactor = Math.min(1, elapsed / GAME_DURATION); // 0..1\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\n    w.spawnInterval = 1.4 - 0.8 * tFactor; // 1.4s -> 0.6s\n\n    // Avance del mundo\n    w.worldX += w.speed * dt;\n\n    // FÃ­sica del jugador\n    p.vy += w.gravity * dt;\n    p.y += p.vy * dt;\n\n    // Suelo\n    const groundY = w.groundY - p.h;\n    if (p.y >= groundY) {\n      p.y = groundY;\n      p.vy = 0;\n      p.onGround = true;\n    } else {\n      p.onGround = false;\n    }\n\n    // Spawning de obstÃ¡culos\n    w.spawnTimer -= dt;\n    if (w.spawnTimer <= 0) {\n      spawnObstacle(w);\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\n    }\n\n    // Colisiones y puntuaciÃ³n por superar obstÃ¡culos\n    for (const o of w.obstacles) {\n      // posiciÃ³n en pantalla\n      const sx = o.x - w.worldX + p.x;\n      o.screenX = sx;\n      // Asignar puntuaciÃ³n al pasar\n      if (!o.scored && sx + o.w < p.x) {\n        o.scored = true;\n        setScore(s => s + 100);\n      }\n      // ColisiÃ³n AABB con jugador\n      const px1 = p.x,\n        px2 = p.x + p.w;\n      const py1 = p.y,\n        py2 = p.y + p.h;\n      const ox1 = sx,\n        ox2 = sx + o.w;\n      const oy1 = o.y,\n        oy2 = o.y + o.h;\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\n      if (collide) {\n        setStatus('gameover');\n        break;\n      }\n    }\n\n    // Eliminar obstÃ¡culos que salieron de pantalla\n    w.obstacles = w.obstacles.filter(o => o.screenX > -120);\n\n    // PuntuaciÃ³n por distancia\n    setScore(s => s + Math.floor(w.speed * dt * 0.5));\n  };\n  const render = (ctx, canvas) => {\n    const w = WORLD.current;\n    const p = w.player;\n\n    // Fondo\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    g.addColorStop(0, '#e8f0ff');\n    g.addColorStop(1, '#ffffff');\n    ctx.fillStyle = g;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Suelo\n    ctx.fillStyle = '#c7d2fe';\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\n\n    // ObstÃ¡culos\n    for (const o of w.obstacles) {\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\n    }\n\n    // Jugador (novio)\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching);\n\n    // HUD\n    ctx.fillStyle = '#334155';\n    ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n    ctx.fillText(`Puntos: ${score}`, 12, 18);\n    ctx.fillText(`Tiempo: ${formatTime(timeLeft)}`, 12, 36);\n    if (status === 'gameover') {\n      drawOverlay(ctx, canvas, 'Â¡Ups! Te has tropezado', 'Pulsa R para reiniciar');\n    } else if (status === 'win') {\n      drawOverlay(ctx, canvas, `Â¡Llegaste a tiempo! ðŸ’’`, `PuntuaciÃ³n: ${score}. Pulsa R para jugar de nuevo`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 860,\n      margin: '0 auto',\n      padding: '1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '.5rem'\n      },\n      children: \"Camino a la iglesia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 0,\n        color: '#64748b'\n      },\n      children: \"Salta los obst\\xE1culos o ag\\xE1chate para esquivarlos. Controles: Espacio / \\u2191 (saltar), \\u2193 (agacharse y ca\\xEDda r\\xE1pida), R (reiniciar).\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: 12,\n        overflow: 'hidden',\n        boxShadow: '0 6px 24px rgba(0,0,0,.12)',\n        background: 'white'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: 800,\n        height: 260,\n        style: {\n          width: '100%',\n          display: 'block',\n          background: 'linear-gradient(#eef2ff, #fff)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 5\n  }, this);\n}\n_s(Game, \"vBs4vB5ATkWYa1roNI3xUCGsbj0=\");\n_c = Game;\nfunction spawnObstacle(w) {\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\n  const type = Math.random() < 0.55 ? 'low' : 'high';\n  if (type === 'low') {\n    const width = 26 + Math.random() * 16;\n    const height = 22 + Math.random() * 20;\n    const x = w.worldX + 900 + Math.random() * 80;\n    const y = w.groundY - height;\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  } else {\n    const width = 80 + Math.random() * 60; // barra mÃ¡s larga\n    const height = 18;\n    const x = w.worldX + 900 + Math.random() * 80;\n    // Altura de barra para obligar a agacharse (por encima de la altura agachado)\n    const y = w.groundY - (42 + 10); // a ~10px por encima del jugador de pie\n    w.obstacles.push({\n      type,\n      x,\n      y,\n      w: width,\n      h: height,\n      scored: false,\n      screenX: 0\n    });\n  }\n}\nfunction formatTime(t) {\n  const s = Math.max(0, Math.floor(t));\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\n  const ss = String(s % 60).padStart(2, '0');\n  return `${mm}:${ss}`;\n}\nfunction drawObstacleLow(ctx, x, y, w, h) {\n  ctx.save();\n  ctx.fillStyle = '#94a3b8';\n  ctx.strokeStyle = '#475569';\n  ctx.lineWidth = 2;\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.stroke();\n  ctx.restore();\n}\nfunction drawObstacleHigh(ctx, x, y, w, h) {\n  ctx.save();\n  // postes laterales\n  ctx.fillStyle = '#9ca3af';\n  roundRect(ctx, x, y + h - 30, 4, 30, 2); // poste izq\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2); // poste der\n  ctx.fill();\n  // barra\n  ctx.fillStyle = '#ef4444';\n  roundRect(ctx, x, y, w, h, 6);\n  ctx.fill();\n  ctx.restore();\n}\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching) {\n  ctx.save();\n  // cuerpo\n  ctx.fillStyle = '#1f2937';\n  roundRect(ctx, x, y, w, h, 8);\n  ctx.fill();\n  // cabeza\n  ctx.fillStyle = '#fde68a';\n  ctx.beginPath();\n  const headY = crouching ? y - 6 : y - 8;\n  ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\n  ctx.fill();\n  // corbata\n  ctx.fillStyle = '#ef4444';\n  ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\n  // sombrita al saltar\n  if (jumping) {\n    ctx.globalAlpha = 0.2;\n    ctx.fillStyle = '#000';\n    ctx.beginPath();\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.globalAlpha = 1;\n  }\n  ctx.restore();\n}\nfunction drawOverlay(ctx, canvas, title, subtitle) {\n  ctx.save();\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  ctx.fillStyle = '#fff';\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.textAlign = 'center';\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\n  ctx.restore();\n}\nfunction roundRect(ctx, x, y, w, h, r) {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.arcTo(x + w, y, x + w, y + h, r);\n  ctx.arcTo(x + w, y + h, x, y + h, r);\n  ctx.arcTo(x, y + h, x, y, r);\n  ctx.arcTo(x, y, x + w, y, r);\n  ctx.closePath();\n}\nvar _c;\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","Game","_s","canvasRef","status","setStatus","score","setScore","timeLeft","setTimeLeft","GAME_DURATION","WORLD","width","speed","maxSpeed","gravity","jumpV","fastFallBoost","groundY","player","x","y","w","h","vy","onGround","crouching","worldX","obstacles","startTs","lastTs","spawnTimer","spawnInterval","reset","canvas","current","ctx","getContext","rafId","loop","ts","dt","Math","min","update","render","requestAnimationFrame","cancelAnimationFrame","onKeyDown","e","repeat","code","jump","crouch","onKeyUp","onClick","window","addEventListener","passive","removeEventListener","p","on","prevBottom","initial","_canvasRef$current","clearRect","height","elapsed","remaining","max","tFactor","spawnObstacle","random","o","sx","screenX","scored","s","px1","px2","py1","py2","ox1","ox2","oy1","oy2","collide","filter","floor","g","createLinearGradient","addColorStop","fillStyle","fillRect","type","drawObstacleLow","drawObstacleHigh","drawGroom","font","fillText","formatTime","drawOverlay","style","maxWidth","margin","padding","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","color","borderRadius","overflow","boxShadow","background","ref","display","_c","push","t","mm","String","padStart","ss","save","strokeStyle","lineWidth","roundRect","fill","stroke","restore","jumping","beginPath","headY","arc","PI","globalAlpha","ellipse","title","subtitle","r","moveTo","arcTo","closePath","$RefreshReg$"],"sources":["C:/Users/DanielGarcÃ­aCarabelo/Downloads/pag web boda 2.0/html/webreact/src/components/Game.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\n// Minijuego 2D: El novio quiere llegar a la iglesia saltando y agachÃ¡ndose\r\n// Controles: Space o Flecha â†‘ para saltar. MantÃ©n Flecha â†“ para agacharte (en el aire: caÃ­da rÃ¡pida). R para reiniciar. Tap: saltar.\r\nexport default function Game() {\r\n  const canvasRef = useRef(null);\r\n  const [status, setStatus] = useState('playing'); // playing | win | gameover\r\n  const [score, setScore] = useState(0);\r\n  const [timeLeft, setTimeLeft] = useState(300); // segundos restantes (5 min)\r\n\r\n  const GAME_DURATION = 300; // 5 minutos\r\n\r\n  // Estado del mundo\r\n  const WORLD = useRef({\r\n    width: 999999, // infinito prÃ¡ctico\r\n    speed: 220, // px/s inicial\r\n    maxSpeed: 380, // aceleraciÃ³n suave con el tiempo\r\n    gravity: 1700, // px/s^2\r\n    jumpV: 620, // salto\r\n    fastFallBoost: 2200, // refuerzo de caÃ­da cuando se pulsa â†“ en el aire\r\n    groundY: 220,\r\n    player: { x: 80, y: 0, w: 32, h: 42, vy: 0, onGround: true, crouching: false },\r\n    worldX: 0,\r\n    obstacles: [],\r\n    startTs: 0,\r\n    lastTs: 0,\r\n    spawnTimer: 0,\r\n    spawnInterval: 1.4, // segundos, irÃ¡ bajando\r\n  });\r\n\r\n  // Inicializar\r\n  useEffect(() => {\r\n    reset(true);\r\n  }, []);\r\n\r\n  // Bucle de juego y render\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    let rafId;\r\n    const loop = (ts) => {\r\n      if (!WORLD.current.lastTs) {\r\n        WORLD.current.lastTs = ts;\r\n        if (!WORLD.current.startTs) WORLD.current.startTs = ts;\r\n      }\r\n      const dt = Math.min(0.032, (ts - WORLD.current.lastTs) / 1000);\r\n      WORLD.current.lastTs = ts;\r\n\r\n      update(dt, ts);\r\n      render(ctx, canvas);\r\n      rafId = requestAnimationFrame(loop);\r\n    };\r\n\r\n    rafId = requestAnimationFrame(loop);\r\n    return () => cancelAnimationFrame(rafId);\r\n  }, [status]);\r\n\r\n  // Entradas\r\n  useEffect(() => {\r\n    const onKeyDown = (e) => {\r\n      if (e.repeat) return;\r\n      if ((e.code === 'Space' || e.code === 'ArrowUp') && status === 'playing') jump();\r\n      if (e.code === 'ArrowDown') {\r\n        if (status === 'playing') crouch(true);\r\n      }\r\n      if (e.code === 'KeyR') reset();\r\n    };\r\n    const onKeyUp = (e) => {\r\n      if (e.code === 'ArrowDown') crouch(false);\r\n    };\r\n    const onClick = () => { if (status === 'playing') jump(); };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    window.addEventListener('keyup', onKeyUp);\r\n    window.addEventListener('touchstart', onClick, { passive: true });\r\n    window.addEventListener('mousedown', onClick);\r\n    return () => {\r\n      window.removeEventListener('keydown', onKeyDown);\r\n      window.removeEventListener('keyup', onKeyUp);\r\n      window.removeEventListener('touchstart', onClick);\r\n      window.removeEventListener('mousedown', onClick);\r\n    };\r\n  }, [status]);\r\n\r\n  const jump = () => {\r\n    const p = WORLD.current.player;\r\n    if (p.onGround) {\r\n      p.vy = -WORLD.current.jumpV;\r\n      p.onGround = false;\r\n    }\r\n  };\r\n\r\n  const crouch = (on) => {\r\n    const p = WORLD.current.player;\r\n    if (on) {\r\n      if (!p.onGround) {\r\n        // caÃ­da rÃ¡pida si estÃ¡ en el aire\r\n        p.vy += WORLD.current.fastFallBoost * 0.04; // impulso corto\r\n      } else if (!p.crouching) {\r\n        // agacharse reduce altura\r\n        p.crouching = true;\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 26; // altura agachado\r\n        p.y = prevBottom - p.h; // mantener pies en el suelo\r\n      }\r\n    } else {\r\n      if (p.crouching) {\r\n        const prevBottom = p.y + p.h;\r\n        p.h = 42;\r\n        p.y = prevBottom - p.h;\r\n        p.crouching = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const reset = (initial = false) => {\r\n    setStatus('playing');\r\n    setScore(0);\r\n    setTimeLeft(GAME_DURATION);\r\n    WORLD.current.worldX = 0;\r\n    WORLD.current.lastTs = 0;\r\n    WORLD.current.startTs = 0;\r\n    WORLD.current.speed = 220;\r\n    WORLD.current.spawnInterval = 1.4;\r\n    WORLD.current.spawnTimer = 0.5;\r\n    WORLD.current.obstacles = [];\r\n    WORLD.current.player = { x: 80, y: WORLD.current.groundY - 42, w: 32, h: 42, vy: 0, onGround: true, crouching: false };\r\n    if (!initial) {\r\n      // forzar un frame limpio\r\n      const ctx = canvasRef.current?.getContext('2d');\r\n      if (ctx && canvasRef.current) {\r\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n      }\r\n    }\r\n  };\r\n\r\n  const update = (dt, ts) => {\r\n    if (status !== 'playing') return;\r\n\r\n    // Tiempo\r\n    const elapsed = (ts - WORLD.current.startTs) / 1000;\r\n    const remaining = Math.max(0, GAME_DURATION - elapsed);\r\n    setTimeLeft(remaining);\r\n    if (remaining <= 0.01) {\r\n      setStatus('win');\r\n      return;\r\n    }\r\n\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // Aumentar velocidad y frecuencia de spawn progresivamente\r\n    const tFactor = Math.min(1, elapsed / GAME_DURATION); // 0..1\r\n    w.speed = 220 + (w.maxSpeed - 220) * tFactor;\r\n    w.spawnInterval = 1.4 - 0.8 * tFactor; // 1.4s -> 0.6s\r\n\r\n    // Avance del mundo\r\n    w.worldX += w.speed * dt;\r\n\r\n    // FÃ­sica del jugador\r\n    p.vy += w.gravity * dt;\r\n    p.y += p.vy * dt;\r\n\r\n    // Suelo\r\n    const groundY = w.groundY - p.h;\r\n    if (p.y >= groundY) {\r\n      p.y = groundY;\r\n      p.vy = 0;\r\n      p.onGround = true;\r\n    } else {\r\n      p.onGround = false;\r\n    }\r\n\r\n    // Spawning de obstÃ¡culos\r\n    w.spawnTimer -= dt;\r\n    if (w.spawnTimer <= 0) {\r\n      spawnObstacle(w);\r\n      w.spawnTimer = w.spawnInterval * (0.9 + Math.random() * 0.4);\r\n    }\r\n\r\n    // Colisiones y puntuaciÃ³n por superar obstÃ¡culos\r\n    for (const o of w.obstacles) {\r\n      // posiciÃ³n en pantalla\r\n      const sx = o.x - w.worldX + p.x;\r\n      o.screenX = sx;\r\n      // Asignar puntuaciÃ³n al pasar\r\n      if (!o.scored && sx + o.w < p.x) {\r\n        o.scored = true;\r\n        setScore((s) => s + 100);\r\n      }\r\n      // ColisiÃ³n AABB con jugador\r\n      const px1 = p.x, px2 = p.x + p.w;\r\n      const py1 = p.y, py2 = p.y + p.h;\r\n      const ox1 = sx, ox2 = sx + o.w;\r\n      const oy1 = o.y, oy2 = o.y + o.h;\r\n      const collide = px1 < ox2 && px2 > ox1 && py1 < oy2 && py2 > oy1;\r\n      if (collide) {\r\n        setStatus('gameover');\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Eliminar obstÃ¡culos que salieron de pantalla\r\n    w.obstacles = w.obstacles.filter((o) => o.screenX > -120);\r\n\r\n    // PuntuaciÃ³n por distancia\r\n    setScore((s) => s + Math.floor(w.speed * dt * 0.5));\r\n  };\r\n\r\n  const render = (ctx, canvas) => {\r\n    const w = WORLD.current;\r\n    const p = w.player;\r\n\r\n    // Fondo\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n    g.addColorStop(0, '#e8f0ff');\r\n    g.addColorStop(1, '#ffffff');\r\n    ctx.fillStyle = g;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Suelo\r\n    ctx.fillStyle = '#c7d2fe';\r\n    ctx.fillRect(0, w.groundY + 10, canvas.width, 4);\r\n\r\n    // ObstÃ¡culos\r\n    for (const o of w.obstacles) {\r\n      if (o.screenX < -60 || o.screenX > canvas.width + 120) continue;\r\n      if (o.type === 'low') drawObstacleLow(ctx, o.screenX, o.y, o.w, o.h);\r\n      else drawObstacleHigh(ctx, o.screenX, o.y, o.w, o.h);\r\n    }\r\n\r\n    // Jugador (novio)\r\n    drawGroom(ctx, p.x, p.y, p.w, p.h, !p.onGround, p.crouching);\r\n\r\n    // HUD\r\n    ctx.fillStyle = '#334155';\r\n    ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n    ctx.fillText(`Puntos: ${score}`, 12, 18);\r\n    ctx.fillText(`Tiempo: ${formatTime(timeLeft)}`, 12, 36);\r\n\r\n    if (status === 'gameover') {\r\n      drawOverlay(ctx, canvas, 'Â¡Ups! Te has tropezado', 'Pulsa R para reiniciar');\r\n    } else if (status === 'win') {\r\n      drawOverlay(ctx, canvas, `Â¡Llegaste a tiempo! ðŸ’’`, `PuntuaciÃ³n: ${score}. Pulsa R para jugar de nuevo`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 860, margin: '0 auto', padding: '1rem' }}>\r\n      <h2 style={{ textAlign: 'center', marginBottom: '.5rem' }}>Camino a la iglesia</h2>\r\n      <p style={{ textAlign: 'center', marginTop: 0, color: '#64748b' }}>\r\n        Salta los obstÃ¡culos o agÃ¡chate para esquivarlos. Controles: Espacio / â†‘ (saltar), â†“ (agacharse y caÃ­da rÃ¡pida), R (reiniciar).\r\n      </p>\r\n      <div style={{ borderRadius: 12, overflow: 'hidden', boxShadow: '0 6px 24px rgba(0,0,0,.12)', background: 'white' }}>\r\n        <canvas\r\n          ref={canvasRef}\r\n          width={800}\r\n          height={260}\r\n          style={{ width: '100%', display: 'block', background: 'linear-gradient(#eef2ff, #fff)' }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction spawnObstacle(w) {\r\n  // Dos tipos: low (bloque en el suelo) y high (barra elevada)\r\n  const type = Math.random() < 0.55 ? 'low' : 'high';\r\n  if (type === 'low') {\r\n    const width = 26 + Math.random() * 16;\r\n    const height = 22 + Math.random() * 20;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    const y = w.groundY - height;\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  } else {\r\n    const width = 80 + Math.random() * 60; // barra mÃ¡s larga\r\n    const height = 18;\r\n    const x = w.worldX + 900 + Math.random() * 80;\r\n    // Altura de barra para obligar a agacharse (por encima de la altura agachado)\r\n    const y = w.groundY - (42 + 10); // a ~10px por encima del jugador de pie\r\n    w.obstacles.push({ type, x, y, w: width, h: height, scored: false, screenX: 0 });\r\n  }\r\n}\r\n\r\nfunction formatTime(t) {\r\n  const s = Math.max(0, Math.floor(t));\r\n  const mm = String(Math.floor(s / 60)).padStart(2, '0');\r\n  const ss = String(s % 60).padStart(2, '0');\r\n  return `${mm}:${ss}`;\r\n}\r\n\r\nfunction drawObstacleLow(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  ctx.fillStyle = '#94a3b8';\r\n  ctx.strokeStyle = '#475569';\r\n  ctx.lineWidth = 2;\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.stroke();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawObstacleHigh(ctx, x, y, w, h) {\r\n  ctx.save();\r\n  // postes laterales\r\n  ctx.fillStyle = '#9ca3af';\r\n  roundRect(ctx, x, y + h - 30, 4, 30, 2); // poste izq\r\n  roundRect(ctx, x + w - 4, y + h - 30, 4, 30, 2); // poste der\r\n  ctx.fill();\r\n  // barra\r\n  ctx.fillStyle = '#ef4444';\r\n  roundRect(ctx, x, y, w, h, 6);\r\n  ctx.fill();\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawGroom(ctx, x, y, w, h, jumping, crouching) {\r\n  ctx.save();\r\n  // cuerpo\r\n  ctx.fillStyle = '#1f2937';\r\n  roundRect(ctx, x, y, w, h, 8);\r\n  ctx.fill();\r\n  // cabeza\r\n  ctx.fillStyle = '#fde68a';\r\n  ctx.beginPath();\r\n  const headY = crouching ? y - 6 : y - 8;\r\n  ctx.arc(x + w / 2, headY, 10, 0, Math.PI * 2);\r\n  ctx.fill();\r\n  // corbata\r\n  ctx.fillStyle = '#ef4444';\r\n  ctx.fillRect(x + w / 2 - 3, y + 10, 6, 10);\r\n  // sombrita al saltar\r\n  if (jumping) {\r\n    ctx.globalAlpha = 0.2;\r\n    ctx.fillStyle = '#000';\r\n    ctx.beginPath();\r\n    ctx.ellipse(x + w / 2, y + h + 10, w * 0.6, 4, 0, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.globalAlpha = 1;\r\n  }\r\n  ctx.restore();\r\n}\r\n\r\nfunction drawOverlay(ctx, canvas, title, subtitle) {\r\n  ctx.save();\r\n  ctx.fillStyle = 'rgba(0,0,0,0.45)';\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  ctx.fillStyle = '#fff';\r\n  ctx.font = 'bold 22px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.textAlign = 'center';\r\n  ctx.fillText(title, canvas.width / 2, canvas.height / 2 - 6);\r\n  ctx.font = '14px Inter, system-ui, -apple-system, Segoe UI, Roboto';\r\n  ctx.fillText(subtitle, canvas.width / 2, canvas.height / 2 + 18);\r\n  ctx.restore();\r\n}\r\n\r\nfunction roundRect(ctx, x, y, w, h, r) {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x + r, y);\r\n  ctx.arcTo(x + w, y, x + w, y + h, r);\r\n  ctx.arcTo(x + w, y + h, x, y + h, r);\r\n  ctx.arcTo(x, y + h, x, y, r);\r\n  ctx.arcTo(x, y, x + w, y, r);\r\n  ctx.closePath();\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}