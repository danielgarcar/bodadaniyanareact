{"ast":null,"code":"import React,{useEffect,useMemo,useRef,useState}from'react';import'./Story.css';import{supabase}from'../supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Story=()=>{const[milestones,setMilestones]=useState([]);const[loading,setLoading]=useState(true);const containerRef=useRef(null);// Navegación y parallax\nconst heroRef=useRef(null);const loveRef=useRef(null);const itemRefs=useRef([]);const[activeIndex,setActiveIndex]=useState(0);const[parallax,setParallax]=useState([]);useEffect(()=>{const fetchMilestones=async()=>{const{data,error}=await supabase.from('story_milestones').select('*').eq('is_published',true).order('sort_order',{ascending:true});if(!error)setMilestones(data||[]);setLoading(false);};fetchMilestones();},[]);const defaultMilestones=[{year:'2016',title:'Nos conocimos',description:'Fue en una noche de verano cuando nuestros caminos se cruzaron por primera vez...',image_url:'/images/img_story1.jpg',icon:'💕'},{year:'2017',title:'Nuestro primer viaje',description:'Un viaje inolvidable que marcó el inicio de muchas aventuras juntos.',image_url:'/images/img_story1.jpg',icon:'💕'},{year:'2018',title:'Nuestro primer aniversario',description:'Celebramos nuestro primer año juntos con una cena romántica.',image_url:'/images/img_story1.jpg',icon:'💕'},{year:'2019',title:'Primera casa juntos',description:'Decidimos dar el paso de convivir y crear nuestro primer hogar.',image_url:'/images/img_story2.jpg',icon:'🏠'},{year:'2020',title:'La propuesta',description:'En un lugar muy especial para nosotros, llegó la pregunta más importante.',image_url:'/images/img_story3.jpg',icon:'💍'},{year:'2021',title:'¡Nos casamos!',description:'Y aquí estamos, listos para celebrar nuestro amor con vosotros.',image_url:'/images/img_story4.jpg',icon:'🎊'},{year:'2022',title:'Nuestro primer viaje juntos',description:'Un viaje inolvidable que marcó el inicio de muchas aventuras juntos.',image_url:'/images/img_story5.jpg',icon:'✈️'},{year:'2023',title:'Celebramos nuestro amor',description:'Un año lleno de amor y felicidad, rodeados de nuestros seres queridos.',image_url:'/images/img_story6.jpg',icon:'🎉'},{year:'2024',title:'Nos conocimos',description:'Fue en una noche de verano cuando nuestros caminos se cruzaron por primera vez...',image_url:'/images/img_story1.jpg',icon:'💕'}];// Año fijo de inicio\nconst START_YEAR=2016;const sections=useMemo(()=>{const TOTAL_CARDS=9;// 2016..2024\nconst iconSet=['💕','🏠','💍','🎊','📸','✈️','🎂','🌅','🌟'];const imageSet=['/images/img_story1.jpg','/images/img_story2.jpg','/images/img_story3.jpg','/images/img_story4.jpg','/images/img_story5.jpg'];const years=Array.from({length:TOTAL_CARDS},(_,i)=>String(START_YEAR+i));const source=milestones.length?milestones:defaultMilestones;const byYear=new Map(source.map(m=>[String(m.year),m]));return years.map((year,idx)=>{const found=byYear.get(year);if(found)return found;return{year,title:`Año ${idx+1} juntos`,description:'Un año lleno de recuerdos y aventuras.',image_url:imageSet[idx%imageSet.length],icon:iconSet[idx%iconSet.length]};});},[milestones]);// IntersectionObserver para activo + parallax con scroll del contenedor\nuseEffect(()=>{const root=containerRef.current;if(!root)return;const allElems=[heroRef.current,...sections.map((_,i)=>itemRefs.current[i]),loveRef.current].filter(Boolean);const io=new IntersectionObserver(entries=>{// Seleccionar la sección más visible\nlet max=0;let idx=0;entries.forEach(entry=>{const i=allElems.indexOf(entry.target);if(i>=0&&entry.intersectionRatio>max){max=entry.intersectionRatio;idx=i;}});setActiveIndex(prev=>max>0?idx:prev);},{root,threshold:[0.3,0.6,0.9]});allElems.forEach(el=>io.observe(el));const handleScroll=()=>{const ch=root.clientHeight;const offsets=sections.map((_,i)=>{const el=itemRefs.current[i];if(!el)return 0;const r=el.getBoundingClientRect();const center=r.top+r.height/2;const rel=ch/2-center;// distancia al centro\nconst offset=Math.max(-30,Math.min(30,rel*0.08));// clamp +/-30px\nreturn offset;});setParallax(offsets);};root.addEventListener('scroll',handleScroll,{passive:true});handleScroll();return()=>{io.disconnect();root.removeEventListener('scroll',handleScroll);};},[sections]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"story-container story-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Cargando historia\\u2026\"})})});}const scrollToIndex=i=>{const root=containerRef.current;if(!root)return;const total=sections.length+2;// hero + items + love\nlet targetEl=null;if(i===0)targetEl=heroRef.current;else if(i===total-1)targetEl=loveRef.current;else targetEl=itemRefs.current[i-1];if(targetEl){root.scrollTo({top:targetEl.offsetTop,behavior:'smooth'});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"story-container fullpage\",ref:containerRef,children:[/*#__PURE__*/_jsx(\"section\",{className:\"story-hero fullpage-section\",ref:heroRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"story-title fade-in\",children:\"Nuestra Historia\"}),/*#__PURE__*/_jsx(\"p\",{className:\"story-subtitle fade-in\",children:\"Cada historia de amor es \\xFAnica, y esta es la nuestra...\"})]})}),sections.map((m,index)=>/*#__PURE__*/_jsx(\"section\",{className:`timeline-full fullpage-section ${index%2===0?'left':'right'}`,ref:el=>itemRefs.current[index]=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:`timeline-full-content ${index%2===0?'slide-in-left':'slide-in-right'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-image\",style:{transform:`translateY(${parallax[index]||0}px)`},children:[/*#__PURE__*/_jsx(\"img\",{loading:\"lazy\",src:m.image_url||m.image,alt:m.title}),m.icon&&/*#__PURE__*/_jsx(\"div\",{className:\"timeline-icon\",children:m.icon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-text\",style:{transform:`translateY(${-(parallax[index]||0)/2}px)`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"timeline-year\",children:m.year}),/*#__PURE__*/_jsx(\"h3\",{children:m.title}),/*#__PURE__*/_jsx(\"p\",{children:m.description})]})]})})},m.id||index)),/*#__PURE__*/_jsx(\"section\",{className:\"love-message fullpage-section\",ref:loveRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"love-content fade-in\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nuestro Amor\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Despu\\xE9s de casi 10 a\\xF1os juntos, hemos aprendido que el amor verdadero no es solo encontrar a la persona perfecta, sino ver la perfecci\\xF3n en una persona imperfecta. Hoy queremos celebrar con vosotros el inicio de este nuevo cap\\xEDtulo en nuestras vidas.\"}),/*#__PURE__*/_jsxs(\"blockquote\",{children:[\"\\\"\",/*#__PURE__*/_jsx(\"i\",{children:\"Dani & Ana\"}),\"\\\"\"]})]})})}),/*#__PURE__*/_jsx(\"nav\",{className:\"dots-nav\",\"aria-label\":\"Secciones de la historia\",children:[...Array(sections.length+2)].map((_,i)=>/*#__PURE__*/_jsx(\"button\",{className:`dot ${activeIndex===i?'active':''}`,\"aria-label\":`Ir a sección ${i+1}`,onClick:()=>scrollToIndex(i)},i))})]});};export default Story;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","supabase","jsx","_jsx","jsxs","_jsxs","Story","milestones","setMilestones","loading","setLoading","containerRef","heroRef","loveRef","itemRefs","activeIndex","setActiveIndex","parallax","setParallax","fetchMilestones","data","error","from","select","eq","order","ascending","defaultMilestones","year","title","description","image_url","icon","START_YEAR","sections","TOTAL_CARDS","iconSet","imageSet","years","Array","length","_","i","String","source","byYear","Map","map","m","idx","found","get","root","current","allElems","filter","Boolean","io","IntersectionObserver","entries","max","forEach","entry","indexOf","target","intersectionRatio","prev","threshold","el","observe","handleScroll","ch","clientHeight","offsets","r","getBoundingClientRect","center","top","height","rel","offset","Math","min","addEventListener","passive","disconnect","removeEventListener","className","children","scrollToIndex","total","targetEl","scrollTo","offsetTop","behavior","ref","index","style","transform","src","image","alt","id","onClick"],"sources":["C:/Users/DanielGarcíaCarabelo/Downloads/pag web boda 2.0/html/webreact/src/components/Story.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport './Story.css';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nconst Story = () => {\r\n  const [milestones, setMilestones] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const containerRef = useRef(null);\r\n  // Navegación y parallax\r\n  const heroRef = useRef(null);\r\n  const loveRef = useRef(null);\r\n  const itemRefs = useRef([]);\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n  const [parallax, setParallax] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchMilestones = async () => {\r\n      const { data, error } = await supabase\r\n        .from('story_milestones')\r\n        .select('*')\r\n        .eq('is_published', true)\r\n        .order('sort_order', { ascending: true });\r\n      if (!error) setMilestones(data || []);\r\n      setLoading(false);\r\n    };\r\n    fetchMilestones();\r\n  }, []);\r\n\r\n  const defaultMilestones = [\r\n    { year: '2016', title: 'Nos conocimos', description: 'Fue en una noche de verano cuando nuestros caminos se cruzaron por primera vez...', image_url: '/images/img_story1.jpg', icon: '💕' },\r\n    { year: '2017', title: 'Nuestro primer viaje', description: 'Un viaje inolvidable que marcó el inicio de muchas aventuras juntos.', image_url: '/images/img_story1.jpg', icon: '💕' },\r\n    { year: '2018', title: 'Nuestro primer aniversario', description: 'Celebramos nuestro primer año juntos con una cena romántica.', image_url: '/images/img_story1.jpg', icon: '💕' },\r\n    { year: '2019', title: 'Primera casa juntos', description: 'Decidimos dar el paso de convivir y crear nuestro primer hogar.', image_url: '/images/img_story2.jpg', icon: '🏠' },\r\n    { year: '2020', title: 'La propuesta', description: 'En un lugar muy especial para nosotros, llegó la pregunta más importante.', image_url: '/images/img_story3.jpg', icon: '💍' },\r\n    { year: '2021', title: '¡Nos casamos!', description: 'Y aquí estamos, listos para celebrar nuestro amor con vosotros.', image_url: '/images/img_story4.jpg', icon: '🎊' },\r\n    { year: '2022', title: 'Nuestro primer viaje juntos', description: 'Un viaje inolvidable que marcó el inicio de muchas aventuras juntos.', image_url: '/images/img_story5.jpg', icon: '✈️' },\r\n    { year: '2023', title: 'Celebramos nuestro amor', description: 'Un año lleno de amor y felicidad, rodeados de nuestros seres queridos.', image_url: '/images/img_story6.jpg', icon: '🎉' },\r\n    { year: '2024', title: 'Nos conocimos', description: 'Fue en una noche de verano cuando nuestros caminos se cruzaron por primera vez...', image_url: '/images/img_story1.jpg', icon: '💕' },\r\n\r\n  ];\r\n\r\n  // Año fijo de inicio\r\n  const START_YEAR = 2016;\r\n\r\n  const sections = useMemo(() => {\r\n    const TOTAL_CARDS = 9; // 2016..2024\r\n    const iconSet = ['💕','🏠','💍','🎊','📸','✈️','🎂','🌅','🌟'];\r\n    const imageSet = [\r\n      '/images/img_story1.jpg',\r\n      '/images/img_story2.jpg',\r\n      '/images/img_story3.jpg',\r\n      '/images/img_story4.jpg',\r\n      '/images/img_story5.jpg'\r\n    ];\r\n    const years = Array.from({ length: TOTAL_CARDS }, (_, i) => String(START_YEAR + i));\r\n    const source = milestones.length ? milestones : defaultMilestones;\r\n    const byYear = new Map(source.map((m) => [String(m.year), m]));\r\n    return years.map((year, idx) => {\r\n      const found = byYear.get(year);\r\n      if (found) return found;\r\n      return {\r\n        year,\r\n        title: `Año ${idx + 1} juntos`,\r\n        description: 'Un año lleno de recuerdos y aventuras.',\r\n        image_url: imageSet[idx % imageSet.length],\r\n        icon: iconSet[idx % iconSet.length],\r\n      };\r\n    });\r\n  }, [milestones]);\r\n\r\n  // IntersectionObserver para activo + parallax con scroll del contenedor\r\n  useEffect(() => {\r\n    const root = containerRef.current;\r\n    if (!root) return;\r\n\r\n    const allElems = [heroRef.current, ...sections.map((_, i) => itemRefs.current[i]), loveRef.current].filter(Boolean);\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        // Seleccionar la sección más visible\r\n        let max = 0;\r\n        let idx = 0;\r\n        entries.forEach((entry) => {\r\n          const i = allElems.indexOf(entry.target);\r\n          if (i >= 0 && entry.intersectionRatio > max) {\r\n            max = entry.intersectionRatio;\r\n            idx = i;\r\n          }\r\n        });\r\n        setActiveIndex((prev) => (max > 0 ? idx : prev));\r\n      },\r\n      { root, threshold: [0.3, 0.6, 0.9] }\r\n    );\r\n\r\n    allElems.forEach((el) => io.observe(el));\r\n\r\n    const handleScroll = () => {\r\n      const ch = root.clientHeight;\r\n      const offsets = sections.map((_, i) => {\r\n        const el = itemRefs.current[i];\r\n        if (!el) return 0;\r\n        const r = el.getBoundingClientRect();\r\n        const center = r.top + r.height / 2;\r\n        const rel = (ch / 2 - center); // distancia al centro\r\n        const offset = Math.max(-30, Math.min(30, rel * 0.08)); // clamp +/-30px\r\n        return offset;\r\n      });\r\n      setParallax(offsets);\r\n    };\r\n\r\n    root.addEventListener('scroll', handleScroll, { passive: true });\r\n    handleScroll();\r\n\r\n    return () => {\r\n      io.disconnect();\r\n      root.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, [sections]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"story-container story-loading\">\r\n        <div className=\"container\">\r\n          <h2>Cargando historia…</h2>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const scrollToIndex = (i) => {\r\n    const root = containerRef.current;\r\n    if (!root) return;\r\n    const total = sections.length + 2; // hero + items + love\r\n    let targetEl = null;\r\n    if (i === 0) targetEl = heroRef.current;\r\n    else if (i === total - 1) targetEl = loveRef.current;\r\n    else targetEl = itemRefs.current[i - 1];\r\n    if (targetEl) {\r\n      root.scrollTo({ top: targetEl.offsetTop, behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"story-container fullpage\" ref={containerRef}>\r\n      <section className=\"story-hero fullpage-section\" ref={heroRef}>\r\n        <div className=\"container\">\r\n          <h1 className=\"story-title fade-in\">Nuestra Historia</h1>\r\n          <p className=\"story-subtitle fade-in\">\r\n            Cada historia de amor es única, y esta es la nuestra...\r\n          </p>\r\n        </div>\r\n      </section>\r\n\r\n      {sections.map((m, index) => (\r\n        <section\r\n          key={m.id || index}\r\n          className={`timeline-full fullpage-section ${index % 2 === 0 ? 'left' : 'right'}`}\r\n          ref={(el) => (itemRefs.current[index] = el)}\r\n        >\r\n          <div className=\"container\">\r\n            <div className={`timeline-full-content ${index % 2 === 0 ? 'slide-in-left' : 'slide-in-right'}`}>\r\n              <div className=\"timeline-image\" style={{ transform: `translateY(${parallax[index] || 0}px)` }}>\r\n                <img loading=\"lazy\" src={m.image_url || m.image} alt={m.title} />\r\n                {m.icon && <div className=\"timeline-icon\">{m.icon}</div>}\r\n              </div>\r\n              <div className=\"timeline-text\" style={{ transform: `translateY(${-(parallax[index] || 0) / 2}px)` }}>\r\n                <div className=\"timeline-year\">{m.year}</div>\r\n                <h3>{m.title}</h3>\r\n                <p>{m.description}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      ))}\r\n\r\n      <section className=\"love-message fullpage-section\" ref={loveRef}>\r\n        <div className=\"container\">\r\n          <div className=\"love-content fade-in\">\r\n            <h2>Nuestro Amor</h2>\r\n            <p>\r\n              Después de casi 10 años juntos, hemos aprendido que el amor verdadero \r\n              no es solo encontrar a la persona perfecta, sino ver la perfección en \r\n              una persona imperfecta. Hoy queremos celebrar con vosotros el inicio \r\n              de este nuevo capítulo en nuestras vidas.\r\n            </p>\r\n            <blockquote>\r\n              \"<i>Dani & Ana</i>\"\r\n            </blockquote>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Navegación por puntos */}\r\n      <nav className=\"dots-nav\" aria-label=\"Secciones de la historia\">\r\n        {[...Array(sections.length + 2)].map((_, i) => (\r\n          <button\r\n            key={i}\r\n            className={`dot ${activeIndex === i ? 'active' : ''}`}\r\n            aria-label={`Ir a sección ${i + 1}`}\r\n            onClick={() => scrollToIndex(i)}\r\n          />\r\n        ))}\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Story;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}